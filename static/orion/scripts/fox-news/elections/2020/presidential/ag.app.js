/*! updated; 11-06-2020 01:18 AM **/


Modulr.define("fox-news.elections.presidential:api",["require"],function(require){function API(){}return API.prototype.feed=require("feeds/index"),new API});
Modulr.define("fox-news.elections.presidential:barchart",["require","fox-news.elections.barchart.v1:api"],function(require){return require("fox-news.elections.barchart.v1:api")});
Modulr.define("fox-news.elections.presidential:common/modules/sticky.nav",["require","jquery","helper","cdn"],function(require,$,Helper,CDN){return new function(){var Proto=this;Proto.init=function(){Proto.populateSubnav(),Proto.scrollToItem()},Proto.populateSubnav=function(){$(".main-content > .collection").each(function(){var title=null,scrollTarget=null;$(this).data("subtitle")?title=$(this).attr("data-subtitle"):""!==$(this).find(".heading:first .title").text()&&null!==$(this).find(".heading:first .title").text()&&(title=null!==$(this).find(".heading:first .title").text()?$(this).find(".heading:first .title").text():$(this).find("header .title").text()),$(this).data("scroll-target")?scrollTarget=$(this).attr("data-scroll-target"):""!==$(this).find(".heading:first .title").text()&&null!==$(this).find(".heading:first .title").text()&&(scrollTarget=$(this).find(".heading:first .title").text().toLowerCase().replace(/\s/g,"-")),title&&scrollTarget&&$(".item-elections-nav .sub-nav ul").append('<li><a href="#'+scrollTarget+'">'+title+"</a></li>")})},Proto.scrollToItem=function(){function onScroll(){$(".main-content > .collection").each(function(){var scrollTarget=$(this).attr("data-scroll-target");$(this).offset().top<window.pageYOffset+navHeight&&$(this).offset().top+$(this).height()>window.pageYOffset+navHeight&&""!==$(this).find(".heading:first .title").text()&&null!==$(this).find(".heading:first .title").text()&&($(".sub-nav").find(".is-active").closest("li").removeClass("is-active"),$('a[href="#'+scrollTarget+'"]').closest("li").addClass("is-active"))})}var navHeight=$(".item-elections-nav").outerHeight();($(".collection").attr("data-scroll-target")||"").replace(/\s/g,"-").toLowerCase();$(".item-elections-nav .sub-nav a").on("click",function(e){if(""!==this.hash){var hash=this.hash,offset=$('.collection[data-scroll-target="'+hash.replace("#","")+'"]').offset().top;$("html, body").animate({scrollTop:offset-navHeight+5},500)}e.preventDefault()}),$(window).on("scroll",onScroll),onScroll()}}});
Modulr.define("fox-news.elections.presidential:feed",["require","@FeedAPI"],function(require,FeedAPI){var API=new FeedAPI({type:"presidential"});return API.methods.setTimer({onTick:function(info,refreshMin){},onDone:function(){},onReload:function(){}}),API});
Modulr.define("fox-news.elections.presidential:feeds/index",["require","jquery","lodash","helper","core.plugins:MultiFeedParser","cdn","feeds/admin/normalize"],function(require,$,_,Helper){var MultiFeedParser=require("core.plugins:MultiFeedParser"),IS_DEV=(require("cdn"),!Helper.isProd()),Normalization={admin:require("feeds/admin/normalize")};return new function(){var Proto=this,FEED_PARSER=null,INITIALIZED=!1;function Normalize(id,data){data&&data.data&&(data=data.data);var res={raw:data};return Normalization[id]&&(res.norm=Normalization[id](data)),res}Proto.init=function(){if(!INITIALIZED){var url=function(){var ret=null;if(-1<window.location.href.indexOf("?env=staging"))ret="//apps.foxnews.com/rest-call/elections/2018/alt/?type=admin&env=staging";else if(IS_DEV){ret="//apps.foxnews.com/rest-call/elections/2018/alt/?type=admin&env=beta"}else ret="//apps.foxnews.com/rest-call/elections/2018/router/?type=admin";return ret}();url&&(FEED_PARSER=new MultiFeedParser({feeds:{admin:{url:url,jsonpCallback:"fxn_fd1",refresh:null}},logging:!0,cacheTime:1,initOnLoad:!0}),INITIALIZED=!0)}},Proto.addFeed=function(id,callback){INITIALIZED||Proto.init()},Proto.getData=function(id,callback){INITIALIZED||Proto.init(),FEED_PARSER.event.getData(id,function(raw){var data=Normalize(id,raw);callback(data.norm)})},Proto.monitor=function(id,callback){INITIALIZED||Proto.init(),FEED_PARSER.event.onLoad(id,function(raw){var data=Normalize(id,raw);callback(data.norm)})}}});
Modulr.define("fox-news.elections.presidential:helper",["require","jquery","lodash","cdn","ISA","core.plugins:CommaVal","core.base:utils/detector","core.plugins:DateTime","core.base:utils/akamai","core.base:utils/search.query"],function(require,$,_,CDN,ISA){function Helper(){}var CommaVal=require("core.plugins:CommaVal"),Detector=require("core.base:utils/detector"),DateTime=require("core.plugins:DateTime"),AkamaiTime=require("core.base:utils/akamai").time,Query=require("core.base:utils/search.query");return Helper.prototype.getCurrentView=Detector.current,Helper.prototype.isProd=function(){return!(-1<window.location.search.indexOf("_feed_env=dev"))&&!(-1<["dev","qa"].indexOf(CDN.env))},Helper.prototype.execModules=function(modules){for(var i=0;i<modules.length;i++){var module=modules[i];"object"==typeof module&&"function"==typeof module.init?module.init():"function"==typeof module&&module()}},Helper.prototype.fixDate=function(dateStr,dayOnly){var sp=dateStr.split("T"),dt=sp[0],tm=dayOnly?"00:00:00":sp[1]||"00:00:00",dts=dt.split("-"),dtf=[dts[1],dts[2],dts[0]].join("/"),date=new Date([dtf,tm].join(" "));return date="[object Date]"!==Object.prototype.toString.call(date)||isNaN(date.getTime())?null:date},Helper.prototype.getPageType=function(){var ret=null,body=$("body");if(body.hasClass("demo"))ret="demo";else if(body.hasClass("elections-2020"))ret="live";else{var meta=ISA.meta();(body.hasClass("section-front-elections")||meta&&-1<meta.channel.indexOf("fnc/politics/election-2020"))&&(ret="landing")}return ret},Helper.prototype.getPageName=function(){function has(val){return body.hasClass(val)}var ret=null,body=$("body");has("election-2020-home")||has("election-2020-state")||has("election-2020-democrats")||has("election-2020-republicans")?(ret="landing",(body.attr("data-state-code")||null)&&(ret="state")):has("election-2020-states")?ret="states":has("election-2020-house")?ret="house":has("election-2020-senate")?ret="senate":has("election-2020-governor")?ret="gubernatorial":has("election-2020-voter-analysis")?ret="voter.analysis":has("election-2020-candidate-tracker")?ret="candidate.tracker":has("election-2020-video")||has("election-2020-live-blog")||has("election-2020-live-updates")?ret="video":has("election-2020-external")?ret="external":has("election-2020-my-races")?ret="my.races":has("election-2020-probability-dials")&&(ret="dials.page");return ret},Helper.prototype.getViewType=function(){var res=$("body").attr("data-view-type")||null;return res&&"default"!==res?res:null},Helper.prototype.prefixModules=function(prefix,arr){for(var i=0;i<arr.length;i++)arr[i]=prefix+arr[i];return arr},Helper.prototype.dataDisplayStr=function(type,val,wholeNumber){var ret=val;switch(type){case"pct":ret=(wholeNumber?Math.round(val):parseFloat(val).toFixed(1))+"%";break;case"num":ret=CommaVal(val);break;case"shortNum":isNaN(val)||(1e3<=(val=parseFloat(val))&&val<1e6?ret=getShortMatch((val/1e3).toString())+" k":1e6<=val&&(ret=getShortMatch((val/1e6).toString())+" mil"))}function getShortMatch(val){if(/\./.test(val)){var match=val.match(/([0-9]+)\.([0-9]{1})/);match&&match[0]&&(val=match[0])}return val}return ret},Helper.prototype.log=function(){var args=Array.prototype.slice.call(arguments);args=[DateTime(AkamaiTime.getCurrent(!0),"[(APP) ${hr:mil}:${min}:${sec}]")].concat(args);try{return console.log.apply(console,args)}catch(err){console.log(args)}},Helper.prototype.isUpdateData=function(obj,other){return!obj||!other||(!_.isEqual||!_.isEqual(obj,other))},Helper.prototype.isIE=function(){return-1!==navigator.userAgent.indexOf("MSIE")||0<window.navigator.appVersion.indexOf("Trident/")},Helper.prototype.getNpidByParty=function(party){return{rep:8639,dem:1036}[party]||null},Helper.prototype.getPartyById=function(id){return{8639:"rep",1036:"dem"}[id]||"other"},Helper.prototype.feedModeOverride=function(){var override=Query.getVal("mode")||!1;return!!override&&override.replace("-election","")},Helper.prototype.isSplitState=function(code){return/NE|ME/i.test(code)},new Helper});
Modulr.define("fox-news.elections.presidential:main",["require","jquery","helper","router"],function(require,$,Helper){var Router=require("router");return Router.ready(),new function(){this.set=function(callback){Router.ready(callback)}}});
Modulr.define("fox-news.elections.presidential:map",["require","fox-news.elections.map.v2:api"],function(require){return require("fox-news.elections.map.v2:api")});
Modulr.define("fox-news.elections.presidential:mapinfo",["require","fox-news.elections.map.v2:config"],function(require){return require("fox-news.elections.map.v2:config")});
Modulr.define("fox-news.elections.presidential:pages/demo/admin",["require","feed"],function(require){require("feed").Admin.getData(function(dataset){var views=dataset.views;console.log("available views:",views),console.log(views.stateInfo());dataset.data})});
Modulr.define("fox-news.elections.presidential:pages/demo/bop",["require","feed"],function(require){require("feed").BOP.getDataRefresh(function(dataset){var views=dataset.views;console.log("available views:",views),console.log(views.results())})});
Modulr.define("fox-news.elections.presidential:pages/demo/index",["require","jquery","helper"],function(require,$,Helper){var type=$("body").attr("data-demo-type")||null;Helper.log("demo type >>>>",type),type&&require(["pages/demo/"+type])});
Modulr.define("fox-news.elections.presidential:pages/demo/overall",["require","feed"],function(require){require("feed").National.getDataRefresh(function(dataset){var views=dataset.views;console.log("available views:",views),console.log(views.winner())})});
Modulr.define("fox-news.elections.presidential:pages/demo/state.county",["require","core.base:utils/search.query","feed"],function(require,Query){var FeedAPI=require("feed"),stateCode=Query.getVal("code")||"NY",type=Query.getVal("type")||"president";FeedAPI.County.getDataRefresh(type,stateCode,function(dataset){var views=dataset.views;console.log("("+stateCode+"): available views",views),console.log(views.results())})});
Modulr.define("fox-news.elections.presidential:pages/demo/state",["require","core.base:utils/search.query","feed"],function(require,Query){var FeedAPI=require("feed"),type=Query.getVal("type")||"president",stateCode=Query.getVal("code")||"NY";FeedAPI.State.getDataRefresh(type,stateCode,function(dataset){var views=dataset.views;console.log(type.toUpperCase()+"("+stateCode+"): available views",views),console.log(views.results())})});
Modulr.define("fox-news.elections.presidential:pages/demo/summary",["require","feed"],function(require){var FeedAPI=require("feed");FeedAPI.Summary.getDataRefresh("senate",function(dataset){var views=dataset.views;console.log("SENATE: available views:",views),console.log(views.resultsByState())}),FeedAPI.Summary.getDataRefresh("governor",function(dataset){var views=dataset.views;console.log("GOVERNOR: available views:",views),console.log(views.resultsByState())}),FeedAPI.Summary.getDataRefresh("house",function(dataset){var views=dataset.views;console.log("HOUSE: available views:",views),console.log(views.resultsByState())})});
Modulr.define("fox-news.elections.presidential:pages/index",["require","helper","core.components:auth","core.base:utils/page.reload"],function(require,Helper){var Auth=require("core.components:auth");require("core.base:utils/page.reload");Auth.initNew();var SHARED_MODULES=[];0<SHARED_MODULES.length&&require(SHARED_MODULES,function(){var args=Array.prototype.slice.call(arguments);Helper.execModules(args)})});
Modulr.define("fox-news.elections.presidential:pages/landing/index",["require","jquery","lodash","helper"],function(require,$,_,Helper){});
Modulr.define("fox-news.elections.presidential:pages/live/dials.page",["require","jquery"],function(require,$){return["common/modules/sticky.nav","@live/modules/dials.full.list"]});
Modulr.define("fox-news.elections.presidential:pages/live/gubernatorial",["require","jquery","helper","core.plugins:OnWindowResize","@live/modules/bop.bars","@live/modules/race.tables/governor","@live/modules/governors.map"],function(require,$,Helper){return require("@live/modules/governors.map").init(),["common/modules/sticky.nav","@live/modules/race.tables/governor"]});
Modulr.define("fox-news.elections.presidential:pages/live/house",["require","jquery","helper","core.plugins:OnWindowResize","@live/modules/race.tables/house","@live/modules/bop.bars","@live/modules/house.chart","@live/modules/house.map","@live/modules/toggle"],function(require,$,Helper){return["common/modules/sticky.nav","@live/modules/race.tables/house","@live/modules/bop.bars","@live/modules/house.chart","@live/modules/house.map","@live/modules/toggle","@live/modules/dials"]});
Modulr.define("fox-news.elections.presidential:pages/live/index",["require","jquery","helper","feed","ISA","core.base:modules/header","core.components:auth","@live/modules/race.tables/my.races","core.base:utils/page.reload"],function(require,$,Helper,FeedAPI,ISA){var PageReload=require("core.base:utils/page.reload"),log=($("body"),Helper.log),IS_DATA_SET=!1,PAGE_TYPE=Helper.getPageName();require(["core.base:modules/header","core.components:auth"],function(){var args=Array.prototype.slice.call(arguments);Helper.execModules(args)}),require(["core.base:modules/hot-topics"],function(HotTopics){HotTopics.init(!0)});var SHARED_MODULES=["@live/modules/race.tables/my.races"];function setAdRefresh(){ISA.provider("gpt",function(Provider){var trigger=function(){setTimeout(function(){Provider.load(),trigger()},6e5)};trigger()})}PAGE_TYPE?require(["pages/live/"+PAGE_TYPE],function(PAGE_MODULES){for(var i=0;i<SHARED_MODULES.length;i++)PAGE_MODULES.push(SHARED_MODULES[i]);PAGE_MODULES&&0<PAGE_MODULES.length&&require(PAGE_MODULES,function(){var args=Array.prototype.slice.call(arguments);Helper.execModules(args)}),FeedAPI.methods.dataMode(function(bool){bool&&!IS_DATA_SET?(IS_DATA_SET=!0,Helper.log("Setting Refresh.."),FeedAPI.methods.setTimer({onTick:function(info,refreshMin){},onDone:function(){},onReload:function(){}}),setAdRefresh()):(setAdRefresh(),PageReload.set(10))})}):log("NO PAGE TYPE! Check the body class")});
Modulr.define("fox-news.elections.presidential:pages/live/landing",["require","jquery","core.plugins:OnWindowResize","@live/modules/bop.bars","@live/modules/bop.bar.national","@live/modules/race.tables/president"],function(require,$){var tables=$(".collection-race-table"),tableType=["president","president-county","house","senate","senate-county","governor"],PAGE_MODULES=["common/modules/sticky.nav","@live/modules/bop.bars","@live/modules/bop.bar.national","@live/modules/dials"];return tables.each(function(){var type=$(this).data("table").replace("race-table-",""),index=tableType.indexOf(type),sel=-1<index?tableType[index]:null;sel&&PAGE_MODULES.push("@live/modules/race.tables/"+sel)}),PAGE_MODULES});
Modulr.define("fox-news.elections.presidential:pages/live/models/banner-xdcomm",["require","jquery","core.plugins:EventMessageHandler","core.plugins:DateTime"],function(require,$,EventMessageHandler,DateTime){var Events=new EventMessageHandler;return function(MyRacesStore){var current,secs,ret,INITIALIZED=!1,PENDING_INFO=null,LISTENERS=[],iframeId="elec2020-banner-xdcomm",storeId=MyRacesStore.getCId(),src="//static.foxnews.com/static/orion/html/elections/2020/banner/xdcomm.html?cb="+(current=new Date,secs=DateTime(current,"${sec}"),ret=DateTime(current,"${yr}${mm}${dd}${hr:mil}${min}"),ret+=secs<=30?30:1);function send(info){"string"!=typeof info&&(info=JSON.stringify(info));var target=$("#"+iframeId);0!==target.length&&Events.sendMessage(target.get(0),setId("set"),{info:info})}function setId(val){return"xdcomm_banner_elec2020."+val}this.send=function(info){INITIALIZED?send(info):PENDING_INFO=info},this.addListener=function(callback){"function"==typeof callback&&LISTENERS.push(callback)},this.reload=function(){var target=$("#"+iframeId);0!==target.length&&Events.sendMessage(target.get(0),setId("reload"),!0)},0===$("#"+iframeId).length&&(Events.addHandler(setId("ready"),function(){if(INITIALIZED=!0,PENDING_INFO)send(PENDING_INFO),PENDING_INFO=null;else try{var data=MyRacesStore.get()||null;data&&send({id:storeId,data:data,ver:MyRacesStore.version})}catch(err){console.log("error getting storage:",storeId,err)}}),Events.addHandler(setId("cookie_return"),function(info){var raw=info.data,val=MyRacesStore.process(raw,!0),data=MyRacesStore.getByKey(val.data);if(0!==LISTENERS.length)for(var i=0;i<LISTENERS.length;i++)LISTENERS[i]({raw:raw,data:data})}),0===$("#"+iframeId).length&&$("body").append('<iframe id="'+iframeId+'" src="'+src+'" frameborder="0" style="position: absolute; visibility: hidden; height: 0;"></iframe>'))}});
Modulr.define("fox-news.elections.presidential:pages/live/models/mapmethods",["require"],function(require){return new function(Canvas){this.inStateText=function(code){return!(-1<["VT","NH","MA","RI","CT","NJ","DE","MD","DC","HI"].indexOf(code))},this.getColorRange=function(val,attr){if("number"!=typeof val)return null;attr=attr||"color";for(var color=props.range[0][color]||null,i=0;i<props.range.length;i++){var item=props.range[i];if(color=item[attr]||null,val<=item.val)break}return color},this.getParty=function(code){var type=null;switch(code){case"R":type="rep";break;case"D":type="dem";break;case"I":type="ind";break;default:type="oth"}return type},this.getColor=function(party){var hex="#FFFFFF";switch(party){case"rep":hex="#d20f26";break;case"dem":hex="#1b4e81";break;case"ind":hex="#703089";break;case"oth":hex="#999999";break;default:hex="#FFFFFF"}return hex}}});
Modulr.define("fox-news.elections.presidential:pages/live/models/maptooltip",["require","jquery","lodash","core.plugins:DateTime","core.base:utils/detector","@live/models/mapmethods"],function(require,$,_){var DateTime=require("core.plugins:DateTime"),Detector=require("core.base:utils/detector"),contain=(require("@live/models/mapmethods"),$(".infographic")),mapHolder=contain.find(".map");$(".state-info");return function(target,fnOpts){var CURRENT_DATASET=null,CURRENT_STATE=null,DATA_VIEWS=null,IS_SHOW=!1,raceType=fnOpts.raceType||null;fnOpts.getColor,fnOpts.getParty;target.html('<div class="info-container">'+target.html()+"</div>");var clone,container=target.find(".info-container"),specialContainer=((clone=container.clone()).addClass("special hide").attr("data-special","1"),target.append(clone),target.find('> .info-container[data-special="1"]')),Proto=this;Proto.show=function(code,info){var stateCode=code,hasData=!(!CURRENT_DATASET||!CURRENT_DATASET[stateCode]),proceed=!IS_SHOW||CURRENT_STATE.code!==stateCode;(proceed=(!proceed||hasData)&&proceed)&&(IS_SHOW=!0,CURRENT_STATE=code,Proto.generate(code),target.addClass("show"))},Proto.hide=function(){IS_SHOW=!1,target.removeClass("show"),target.css({opacity:0})},Proto.render=function(container,info,special){var stateCode=info,stateName=info+(special?" (Special)":""),stateData=CURRENT_DATASET[stateCode+(special?"-S":"")],closingTime=(DATA_VIEWS.views.isPollClose(stateCode),!1|DATA_VIEWS.data.norm.states[stateCode].pollTimes.close),normTime=closingTime?DateTime(closingTime,"${hr}:${min} ${ampm} ET"):"TBD",title=container.find(".tip__title"),candidateTarget=container.find(".tip__candidates"),percentIn=container.find(".tip__polls"),raceStatus=isPre()?"Polls Close at "+normTime:"Percent In "+stateData[0].FOXPrecinctsReporting+"%";function isPre(){return"pre"===DATA_VIEWS.views.electionMode()}title.css({"text-align":"left"}).text(stateName),percentIn.text(raceStatus);candidateTarget.html(function(){for(var candidateArr=[],candidates=stateData[0].results,i=0;i<candidates.length;i++){var percent,cand=candidates[i],winner=cand.isWinner&&!isPre()?" winner":"",party=cand.partyCode,votes=isPre()?"":cand.votesDisplay.count,incumbent=cand.isIncumbent?'<span class="icon incumbent">"Incumbent"</span>':"";percent=isPre()?"-":cand.votes.percentage<1&&0<cand.votes.percentage?"<1%":"mobile"===Detector.current()?Math.floor(cand.votes.percentage)+"%":cand.votesDisplay.percentage,candidateArr.push('<div class="tip__row">                      <div class="tip__name" data-party='+party+winner+" data-npid="+cand.candidate.npid+">"+cand.candidateDisplay.opt1+incumbent+'</div>                        <div class="tip__votes">'+votes+'</div>                      <div class="tip__percent">'+percent+"</div>                    </div>")}return candidateArr.join("")})},Proto.generate=function(info){var isSpecial="senate"===raceType&&-1<["MS","MN"].indexOf(info);Proto.render(container,info),isSpecial?(Proto.render(specialContainer,info,!0),specialContainer.removeClass("hide")):specialContainer.addClass("hide")},Proto.setData=function(data,adminData){CURRENT_DATASET=data.views.resultsByState(CURRENT_STATE),DATA_VIEWS=adminData,CURRENT_STATE&&Proto.generate(CURRENT_STATE)},contain.mousemove(function(e){var res,mapPos=mapHolder.position(),mapW=mapHolder.width(),mapH=mapHolder.height(),infoW=target.outerWidth(!0),infoH=target.outerHeight(!0),mouseX=e.pageX,mouseY=e.pageY,css={};_.merge(css,{left:(res=mouseX-2*mapPos.left+10,mouseX>2*mapPos.left+mapW/2&&(res-=infoW+20),res),top:function(){var res=mouseY-2*mapPos.top+5;return mouseY>2*mapPos.top+mapH/2&&(res-=infoH+5),res}()}),target.css(css)}),mapHolder.mouseleave(function(){target.removeClass("show")})}});
Modulr.define("fox-news.elections.presidential:pages/live/models/my.races",["require","jquery","lodash","core.base:utils/cookie","core.plugins:EventMessageHandler","@live/models/banner-xdcomm"],function(require,$,_,Cookie,EventMessageHandler,XDComm){return new function(){var Proto=this,cid=(new EventMessageHandler,"FXN_e2020_mr"),version=4;Proto.version=version,Proto.getCId=function(){return cid},Proto.isAvailable=function(){return Cookie.isAvailable()},Proto.set=function(item){var curr=Proto.get();if(-1<search(curr,item))return null;20<curr.length+1||(curr.push(item),store(curr),Proto.XDComm.send())},Proto.isMaxNext=function(){return 20<Proto.get().length+1},Proto.get=function(raw){var val=Cookie.get(cid);return raw?val:Proto.process(val)},Proto.process=function(val,custom){var res=[];if(val)try{var json=JSON.parse(val);res=custom?json:json.ver===version?Array.isArray(json.data)?json.data:[]:(store([]),[])}catch(err){}return res},Proto.getByKey=function(custom){for(var items=custom||Proto.get(),obj={},i=0;i<items.length;i++){var sp=items[i].split(":"),key=sp[0],code=sp[1];obj[key]||(obj[key]=[]),obj[key].push({code:code,index:getIndex(code)})}for(var id in obj)obj[id]=sortItems(obj[id]),obj[id]=getCode(obj[id]);function sortItems(arr){arr=sort(arr,"code");var lookup=[],batch={},newArr=[];return function(){for(var i=0;i<arr.length;i++){var item=arr[i],scode=item.code.split("-")[0];-1===lookup.indexOf(scode)&&(lookup.push(scode),batch[scode]=[]),batch[scode].push(item)}}(),function(){for(var i=0;i<lookup.length;i++){var scode=lookup[i];batch[scode]=sort(batch[scode],"index"),newArr=newArr.concat(batch[scode])}}(),newArr}function getCode(items){for(var arr=[],i=0;i<items.length;i++)arr.push(items[i].code);return arr}function sort(arr,key){return arr.sort(function(a,b){var valA=a[key],valB=b[key];return valB<valA?1:valA<valB?-1:0}),arr}function getIndex(item){var sp=item.split("-");return 1===sp.length?0:isNaN(sp[1])?sp.join("-"):parseInt(sp[1],10)}return obj},Proto.remove=function(key){var curr=Proto.get();if(curr){var index=search(curr,key);-1<index&&curr.splice(index,1),store(curr),Proto.XDComm.send()}},Proto.generateId=function(arr){return arr.join(":")},Proto.setInteraction=function(elements){elements.each(function(){var target=$(this);if("1"!==target.attr("data-interact")){var to;target.attr("data-interact","1"),target.addClass("js-enable");var hovering=!1,trackInside=!1;target.hover(function(){hovering=!0,Proto.showMessage("display",target),trackInside||Proto.isMaxNext()||target.addClass("hover")},function(){trackInside=hovering=!1,Proto.showMessage(!1,target),target.removeClass("hover")}),target.on("click",function(){clearTimeout(to),to=setTimeout(function(){var toState=target.hasClass("active")?"on":"off";Proto.showMessage("display",target),"off"==toState&&hovering&&(target.removeClass("hover"),trackInside=!0)},50)})}})},Proto.XDComm={send:function(){XDC.send({id:Proto.getCId(),data:Proto.get(),ver:version})},reload:function(){XDC.reload()},listen:function(callback){XDC.addListener(callback)}},Proto.showMessage=function(type,elem){var target=elem.parent()||elem.closest(".info"),active=elem.hasClass("active"),modal=target.find(".modal-saved-race")||!1,dek={pre:'Select the <span class="icon icon-star">star</span> to add this race to your list.',post:'This race is now saved on the My Races page, found in the Elections navigation. Click the <span class="icon icon-star">star</span> to remove it.',max:'You may <span class="icon icon-star">star</span> up to 20 races. To add this one, please remove one from the My Races page'};if(type=!("display"!==type||active||!Proto.isMaxNext())?"max":"display"===type&&(active?"post":"pre")){if(1!==target.data("modal")){var template='<div class="modal modal-saved-race">                                <p>'+dek[type]+"</p>                              </div>";target.append(template)}else modal&&0<modal.length&&(modal.find("p").html(dek[type]),modal.hasClass("hide")&&modal.removeClass("hide"));target.attr("data-modal",1)}else!type&&modal&&0<modal.length&&modal.addClass("hide")};var XDC=new XDComm(Proto);function search(items,key){var found=-1;if(!items)return found;for(var i=0;i<items.length;i++)if(items[i]===key){found=i;break}return found}function store(val){Cookie.set(cid,JSON.stringify({data:val,ver:version}),{path:"/",expires:365,samesite:"none"})}}});
Modulr.define("fox-news.elections.presidential:pages/live/models/tables",["require","jquery","lodash","helper","feed","core.base:utils/detector","core.plugins:DateTime"],function(require,$,_,Helper,FeedAPI){require("core.base:utils/detector");var DateTime=require("core.plugins:DateTime");return function(race){var Proto=this;function setMarkup(target){var poll=target.find(".poll-info"),pct=target.find(".percent-in");poll.find(".pill");1===pct.length?target.attr("data-init",1):pct.length<1&&(target.append('<span class="percent-in"></span>'),target.attr("data-init",1))}Proto.checkRanking=function(race_type,data){for(var arr=[],hasVotes=!1,norm_data=data,i=0;i<norm_data.length;i++){var item=norm_data[i],cmd=item.isWinner?"unshift":"push";0<item.votes.count&&(hasVotes=!0),arr[cmd](norm_data[i].candidate.npid)}return{arr:arr,hasVotes:hasVotes}},Proto.throwDashes=function(holder,adminData){var footer=holder.find(".race-table-footer"),polls=holder.find(".poll-info"),pct=footer.find(".percent-in"),open=_.get(adminData,"stateAdminInfo.pollTimes.open",_.get(adminData,"pollTimes.open",null)),openNorm=open?DateTime(open,"${hr:reg}:${min}${ampm}"):null;holder.removeClass("winner-dem winner-rep winner-ind winner-oth"),holder.find(".candidates [data-npid]").each(function(){var el=$(this),votes=el.find(".votes"),percentage=el.find(".percentage span.percent");el.hasClass("winner")&&el.removeClass("winner"),votes.find("span").each(function(){$(this).text("-")}),percentage.text("-")}),polls.removeClass("is-open is-closed"),0<pct.length&&pct.addClass("hide"),0<polls.length&&openNorm&&polls.text("Polls open at "+openNorm+" ET")},Proto.setTable=function(holder,state_code,race_id,data,mode){var type=0<=race_id.indexOf("county")?"county":"house-state"===race_id?"house":"summary";if(data){holder.removeClass("winner-dem winner-rep winner-ind winner-oth");var status=holder.find(".race-table-footer .status");status.data("init")||setMarkup(status);var candidates=holder.find(".candidates"),pct=holder.find(".race-table-footer .percent-in"),orderChanged=!1,cand_norm_data=data.results||data.candidateResults,precinctsReporting="county"==type?data.details.precinctsReporting.val:"house"==type?data.districtTotals.precinctsReporting:data.FOXPrecinctsReporting,rankingInfo=Proto.checkRanking(race_id,cand_norm_data),isRunoff=(function(holder,data){var flipped=data.isFlipped&&data.winner,type=holder.attr("data-race"),party=!1;!flipped&&0<holder.find(".header .icon-flipped").length&&holder.find(".header .icon-flipped").remove();if(!flipped)return;if("president"===type){var npid=data.winner,cand=data.resultsByCandidateId[npid];party=cand.candidate.partyCode||!1}else party=data.winner[0].partyCode||!1;var flippedClass="D"===party?"icon-flipped-rep-dem":"R"===party&&"icon-flipped-dem-rep",markup='<span class="icon icon-flipped '+flippedClass+'">                        <span class="is-short">flip</span>                        <span class="is-long">flipped</span>                      </span>';flipped&&flippedClass&&(holder.find(".header .icon-flipped").remove(),holder.find(".header").append(markup))}(holder,data),data.isRunoff||!1);pct.removeClass("hide"),pct.text("Reporting "+precinctsReporting+"% in"),candidates.children(":not(.race-table-header)").each(function(i){var el=$(this);el.attr("data-rank")||null||el.attr("data-rank",i)});function set(index,data){var npid=data.candidate.npid||null,normParty=function(code){switch(code){case"democrat":code="dem";break;case"republican":code="rep";break;case"independent":code="ind";break;case"other":code="oth";break;default:code="oth"}return code}(_.get(data,"candidate.partyName",data.partyName||"").toLowerCase()),winner=data.isWinner,winParty=winner?normParty:"",cmd=winner?"addClass":"removeClass";data.isWinner&&!isRunoff&&function(holder,party){holder.attr("data-party")!==party&&holder.attr("data-party",party);holder.removeClass("winner-dem winner-rep winner-ind winner-oth"),holder.addClass("winner-"+party)}(holder,winParty),candidates.find(".candidate[data-npid='"+npid+"']").each(function(){var el=$(this),rank=parseInt(el.attr("data-rank"),10);isRunoff&&winner?(el.find(".icon-runoff").length<1&&el.find(".name").append('<span class="icon icon-runoff">                            <span class="is-short">RO</span>                            <span class="is-long">Runoff</span>                          </span>'),el.removeClass("winner "+normParty)):isRunoff||el[cmd]("winner "+normParty);var orderIndex=rankingInfo.arr.indexOf(parseInt(npid,10));rank!==orderIndex&&(el.attr("data-rank",orderIndex),orderChanged=!0),function(holder,npid,candidate_data){var percent_votes=candidate_data.votes.percentage<1&&0<candidate_data.votes.percentage?"<1":candidate_data.votes.percentage;holder.find("td").each(function(){var el=$(this);switch(el.attr("class")){case"percentage":var pctSpan=el.find(".percent");"<1"===percent_votes?pctSpan.text("<1%"):FeedAPI.methods.numUpdate(pctSpan,percent_votes,{format:"pct",formatStr:"${num}",precision:!0,precisionType:"hundredth"});break;case"votes":var voteSpan=el.find(".count");FeedAPI.methods.numUpdate(voteSpan,candidate_data.votes.count,{format:"num",formatStr:"${num}"})}})}($(this),0,data)})}for(var i=0;i<cand_norm_data.length;i++)set(0,cand_norm_data[i]);orderChanged&&function(holder){var candidates=holder.find(".candidates"),items=candidates.children().detach();items.sort(function(a,b){var valA=parseInt($(a).attr("data-rank"),10),valB=parseInt($(b).attr("data-rank"),10);return valB<valA?1:valA<valB?-1:0}),candidates.html(items)}(holder)}},Proto.setPollStatus=function(target,data,dataMode){if("pre"!==dataMode&&null!==dataMode){var footer=target.find(".race-table-footer"),status=footer.find(".status");status.data("init")||setMarkup(status);footer.find(".percent-in");var poll=footer.find(".poll-info"),prevPoll=(poll.attr("class")||"").replace("poll-info","").trim(),close=_.get(data,"stateAdminInfo.pollTimes.close",""),closeNorm=DateTime(close,"${hr:reg}:${min}${ampm}"),desc="open"===dataMode?"is-open":"is-closed",pollText="open"===dataMode?"Polls close at "+closeNorm+" ET":"Polls are closed",pill='<span class="pill '+desc+'">'+("open"===dataMode?"OPEN":"CLOSED")+"</span>";prevPoll!==desc&&(poll.removeClass(prevPoll),poll.addClass(desc).text(pollText).prepend(pill))}},Proto.setContested=function(elem,admin){var header=elem.find(".table-header .header");admin.contested?(elem.hasClass("is-contested")||elem.addClass("is-contested"),header.find(".icon-contested").length<1&&header.append('<span class="icon icon-contested">Contested</span>')):(elem.removeClass("is-contested"),0<header.find(".icon-contested").length&&header.find(".icon-contested").remove())}}});
Modulr.define("fox-news.elections.presidential:pages/live/models/video.controls",["require","jquery"],function(require,$){var VIDEO_INSTANCES={},EVENT_LISTENERS={};return new function(){function trigger(event){for(var id in VIDEO_INSTANCES){var item=VIDEO_INSTANCES[id],instance=item.instance,target=item.target;if(!!!(0<target.length&&target.is(":visible")&&"function"==typeof instance.trigger))return;try{"function"==typeof instance.trigger&&(instance.isReady()?instance.trigger(event):instance.on("player.ready",function(){instance.trigger(event)}))}catch(err){}}}function triggerEvent(event,instance,args){if(EVENT_LISTENERS[event])for(var arr=EVENT_LISTENERS[event],i=0;i<arr.length;i++){(0,arr[i])({instance:instance,args:args})}}Proto=this,Proto.addInstance=function(target,instance){if(instance&&"function"==typeof instance.getOpts){var uid=instance.getOpts().app.uid;VIDEO_INSTANCES[uid]||(VIDEO_INSTANCES[uid]={instance:instance,target:target},function(instance){function set(event){instance.on("amp."+event,function(){triggerEvent(event,instance,Array.prototype.slice.call(arguments))})}for(var events=["play","pause"],i=0;i<events.length;i++)set(events[i])}(instance))}},Proto.pause=function(){trigger("pause")},Proto.play=function(){trigger("play")},Proto.mute=function(){trigger("mute")},Proto.unmute=function(){trigger("unmute")},Proto.on=function(event,callback){EVENT_LISTENERS[event]||(EVENT_LISTENERS[event]=[]),EVENT_LISTENERS[event].push(callback)},Proto.trigger=function(event){EVENT_LISTENERS[event]&&triggerEvent(event,null,null)}}});
Modulr.define("fox-news.elections.presidential:pages/live/modules/bop.bar.national",["require","jquery","lodash","helper","feed"],function(require,$,_,Helper,FeedAPI){var holder=$(".collection-party-race.is-president"),bar=holder.find(".bar-contain"),IS_EXISTS=0!==bar.length;return new function(){var Proto=this,barHolder=bar.find(".bar-header"),STATE_DATASET={},VOTE_DATASET={},ADMIN_CONTESTED={},ADMIN_ELECTORAL={},INITIALIZED=null,STATE_INFO={states:{none:{}},totals:{dem:0,rep:0}},VOTE_INFO={};function sortObj(states,party){var sorted=_.sortBy(states,states.callOrder);return"rep"===party&&(sorted=_.reverse(sorted)),sorted}function setNone(target,data,electoralTotal){data.votes;var remaining=0===electoralTotal?100:(100*(538-electoralTotal)/538).toFixed(16),template='<div class="bar none" style="width:'+remaining+'%"></div>';0<remaining&&target.append(template)}function getPartyLong(code){var party=null;switch(code){case"dem":party="Democrat";break;case"rep":party="Republican";break;case"grn":party="Green";break;case"ind":party="Independent";break;default:party="Other"}return party}Proto.init=function(){INITIALIZED||(INITIALIZED=!0,IS_EXISTS&&Proto.loadData())},Proto.loadData=function(){FeedAPI.Electoral.getDataRefresh(function(ElectoralData){FeedAPI.National.getData(function(NationalData){FeedAPI.Admin.getData(function(FeedAdmin){var results=ElectoralData.views.results(),stateAdmin=FeedAdmin.data.norm.states,natlResults=NationalData.views,natlVotes=natlResults.popularVotesInfo();if("pre"!==FeedAdmin.views.electionMode()){if(Helper.isUpdateData(STATE_DATASET,results)||Helper.isUpdateData(ADMIN_CONTESTED,stateAdmin)){STATE_DATASET=results,ADMIN_CONTESTED=stateAdmin;var electoralTotal=0,counter=1;STATE_INFO.totals={dem:0,rep:0},STATE_INFO={states:{none:{}},totals:{dem:0,rep:0}},_.isEmpty(results)||$.each(results,function(state,info){var stateInfo=natlResults.resultsByState(state),winner=info.winner,party=function(code){var party=null;switch(code){case"d":party="dem";break;case"r":party="rep";break;case"gr":party="grn";break;case"i":party="ind";break;default:party="oth"}return party}(info.winner.party.toLowerCase()),votes=winner.ElectWon;electoralTotal+=votes;var stateName=Helper.isSplitState(state)?function(state,name){var code=state.slice(0,2),ret=!1,stateName=name||code;if(state=state.trim(),/At Large/i.test(state))ret=stateName.concat(" At Large");else if(/District/i.test(state)){var num=state.charAt(state.length-1)||"";ret=!isNaN(num)&&0<num.length?stateName.concat(" District "+num):stateName}else ret=name;return ret}(state,_.get(stateInfo,"stateAdminInfo.name","")):_.get(stateInfo,"stateAdminInfo.name","");STATE_INFO.states[party]||(STATE_INFO.states[party]={}),STATE_INFO.states[party][state]||(STATE_INFO.states[party][state]={}),STATE_INFO.totals[party]||(STATE_INFO.totals[party]=0),STATE_INFO.totals[party]=STATE_INFO.totals[party]+votes,STATE_INFO.states[party][state].code=state,STATE_INFO.states[party][state].name=stateName,STATE_INFO.states[party][state].votes=votes,STATE_INFO.states[party][state].callOrder=counter,counter++});var remaining=538-electoralTotal;STATE_INFO.states.none.votes=remaining,STATE_INFO.winner=natlResults.winner(),function(electoralTotal,adminData){var bars=holder.find(".bar-wrap .bars");bars.empty();for(var barOrder=["dem","ind","grn","oth","none","rep"],compiledTemplate=_.template('<div class="bar <%= party %> state-<%= state_code %> <%= contested %>"style="width: <%=percent%>%">                            <%=delegates%> votes                            <div class="bar-tooltip">                              <div class="name"><%=state_name%></div>                                <div class="value"><%=delegates%></div>                                <div class="party"><%= segmentText %></div>                              </div>                            </div>                          </div>'),i=0;i<barOrder.length;i++){var stateData=STATE_INFO.states[barOrder[i]],party=barOrder[i],markup=(STATE_INFO.totals[party],[]);if(markup.party=party,"none"===barOrder[i])setNone(bars,STATE_INFO.states.none,electoralTotal);else if(stateData||!_.isEmpty(stateData))for(var sortedStateData=sortObj(stateData,barOrder[i]),j=0;j<sortedStateData.length;j++){var info=sortedStateData[j],votes=info.votes,stateName=info.name,state=info.code,abbrev=state.toLowerCase().split(" ").join("-"),stateNorm=state.slice(0,2),declaredParty=party?"Declared "+getPartyLong(party):"",contested=!(-1<abbrev.indexOf("district"))&&_.get(adminData[stateNorm],"contested",!1);markup.percent=(100*votes/538).toFixed(16),markup.state_code=abbrev,markup.state_name=stateName,markup.contested=contested?"is-contested":"",markup.delegates=votes,markup.segmentText=contested?"Contested Race":declaredParty;var segment=compiledTemplate(markup);bars.append(segment)}}}(electoralTotal,stateAdmin)}if(Helper.isUpdateData(VOTE_DATASET,natlResults)||Helper.isUpdateData(ADMIN_ELECTORAL,FeedAdmin)){ADMIN_ELECTORAL=FeedAdmin;var voteData=(VOTE_DATASET=natlResults).resultsByVote(!0);$.each(voteData,function(key,val){var party=Helper.getPartyById(val.candidate.npid);VOTE_INFO[party]||(VOTE_INFO[party]={}),VOTE_INFO[party].party=party,VOTE_INFO[party].votes=val.votes.count,VOTE_INFO[party].percent=val.votes.popularPercentage,function(data){var barLower=bar.find(".bar-label.is-lower"),target="dem"===data.party?barLower.find(".label-left"):"rep"===data.party?barLower.find(".label-right"):null;if(!target)return;target.find(".popular-vote").each(function(){var el=$(this),count=el.find("span.count"),pct=el.find("span.percent"),pctVal=(function(el){el.attr("data-party")}(target),data.percent.toFixed(1));null!==data.votes&&(FeedAPI.methods.numUpdate(count,data.votes,{format:"num",formatStr:"${num}"}),FeedAPI.methods.numUpdate(pct,pctVal,{format:"num",formatStr:"${num}",precision:!0}))})}(VOTE_INFO[party]),0<barHolder.find(".party-label[data-party="+party+"]").length&&function(party,voteData,admin,national,voteSummary){var target=bar.find(".bar-header .party-label[data-party="+party+"]"),npid="dem"===party?1036:"rep"===party?8639:null,voteTarget=target.find(".count span"),nationalWinner=_.get(national.winner(),"candidate.npid",!1),winnerOverride=admin.views.winnerOverride(),isWinner=!!voteData.isWinner&&voteData.isWinner,overrideNum=function(adminData,party){var type=getPartyLong(party).toLowerCase().concat("Candidate")||!1,override=adminData.data.raw.generalsettings[type]||!1,int=!(!override||isNaN(override))&&parseInt(override,10);return 0<=int&&int}(admin,party),electoralTotal=!1;electoralTotal=!1!==overrideNum&&0<=overrideNum?overrideNum:!(overrideNum||!npid)&&(!isNaN(voteSummary[npid].electoralVotes)&&voteSummary[npid].electoralVotes);var electoralVotes=!1!==electoralTotal&&0<=electoralTotal&&electoralTotal;!1!==electoralVotes&&0<=electoralVotes&&FeedAPI.methods.numUpdate(voteTarget,electoralVotes,{format:"num",formatStr:"${num}"});winnerOverride?winnerOverride===party?target.addClass("winner"):winnerOverride!==party&&target.removeClass("winner"):isWinner&&npid?nationalWinner===npid&&target.addClass("winner"):target.removeClass("winner")}(party,val,FeedAdmin,natlResults,natlVotes)})}}})})})}}});
Modulr.define("fox-news.elections.presidential:pages/live/modules/bop.bars",["require","jquery","helper","feed","lodash"],function(require,$,Helper,FeedAPI,_){return new function(){var Proto=this,INITIALIZED=!1,CURRENT_DATASET={},page=Helper.getPageName(),holder=$("landing"===page?".collection-party-bars":".collection-party-race"),VOTE_DATASET={};function getNone(data){var total=0;return $.each(data.details,function(key,val){total+=val.curr+val.start}),((data.totals.expectedTotal-total)/data.totals.expectedTotal*100).toFixed(2)}Proto.init=function(){INITIALIZED||(INITIALIZED=!0,0<holder.length&&Proto.loadData())},Proto.loadData=function(){FeedAPI.BOP.getDataRefresh(function(BOPInfo){FeedAPI.Admin.getData(function(FeedAdmin){var results=BOPInfo.views.results();holder.each(function(){var el=$(this),type=el.data("race")||page;if(type){var data=results[type];"pre"!==FeedAdmin.views.electionMode()&&data&&Helper.isUpdateData(CURRENT_DATASET[type],data)&&(CURRENT_DATASET[type]=data,VOTE_DATASET[type]||(VOTE_DATASET[type]={}),Proto.setBars(el,type,data))}})})})},Proto.setBars=function(target,type,data){if(type&&0!==target.length){var bar=target.find(".bar-contain"),header=bar.find(".bar-header"),barInfo=bar.find(".bar-wrap"),barData=barInfo.find(".bars"),majority=(data.details,data.totals.expectedTotal,data.totals.seatsRemaining,"senate"===type?51:218),total="senate"===type?100:435;"senate"===type&&Proto.setNetGain(bar,data);for(var barOrder=["dem","oth","none","rep"],i=0;i<barOrder.length;i++){var pct,template,party=barOrder[i],barTarget=barData.find(".bar."+party+":not(.ctrl)");if("none"===barOrder[i]){var barAttr=0<data.details.oth.curr?".bar.oth":".bar.dem:not(.ctrl)",nonePct=getNone(data);template='<div class="bar none" style="width:'+nonePct+'%"></div>',target.find(".bar.none").length<1?target.find(barAttr).after(template):target.find(".bar.none").width(nonePct+"%")}else if("oth"===barOrder[i]&&0<data.details.oth.curr){var avail=target.find(".bar.oth").length<1;template='<div class="bar oth" style="width:'+(pct=(data.details.oth.curr/total*100).toFixed(2))+'%"></div>',avail?target.find(".bar.dem:not(.ctrl)").after(template):target.find(".bar.oth").width(pct+"%")}else{var label=header.find(".party-label[data-party="+party+"]"),numTxt=label.find(".count span"),start=data.details[party].start,currVotes=data.details[party].curr,totalVotes=data.details[party].curr+start,cmd=majority<=totalVotes?"addClass":"removeClass";if(pct=(currVotes/total*100).toFixed(2),label[cmd]("winner"),barTarget.width(pct+"%"),numTxt.text(totalVotes),"senate"===type){var lowerLabel=barInfo.find(".bar-label.is-lower"),labelDiv="dem"===party?".label-left":"rep"===party?".label-right":null,partyLabel=labelDiv?lowerLabel.find(".label"+labelDiv+" ."+party):null,gainNum=0<=data.details[party].curr&&"+"+data.details[party].curr;partyLabel&&gainNum&&partyLabel.text(gainNum)}}}}},Proto.setNetGain=function(target,data){var gained=target.find(".label-center > .gained");if(!(gained.length<1)){var gainVal=data.totals.netGain,netValue=!!(gainVal&&1<gainVal.length)&&gainVal.toLowerCase(),partyCode=netValue?netValue.charAt(0):"",party="d"===partyCode?"dem":"r"===partyCode?"rep":"",partyText="d"===partyCode?"Democrats Net ":"r"===partyCode&&"Republicans Net ",val=netValue&&partyText?partyText+"+"+netValue.replace(partyCode,"").trim():"";gained.removeClass("dem rep").addClass(party),gained.text(val)}}}});
Modulr.define("fox-news.elections.presidential:pages/live/modules/dials.full.list",["require","jquery","helper","feed"],function(require,$,Helper,FeedAPI){window.location;return new function(){var Proto=this,INITIALIZED=!1,PREV_VALUE={},isDialsPage=0<$(".election-2020-probability-dials").length,generalRaces=["US-P","US-H","US-S"],dials=$(".collection-probability-dials").find(".dial-container"),nationDials=$(".dial-group-nation"),stateDials=$(".dial-group-states");dials.length;function setWinnerView(currentItem,winner){var currentView=currentItem.parent(),currentState=currentView.find("h4").html(),winnerMarkupBiden="<h4 class='title'>"+currentState+'</h4><div class="info">\n\t<div class="m headshot">\n\t<picture><source srcset="//a57.foxnews.com/static.foxnews.com/static/orion/styles/img/fox-news/elections/headshots/68/68/joe-biden.png?ve=1&amp;tl=1, //a57.foxnews.com/static.foxnews.com/static/orion/styles/img/fox-news/elections/headshots/132/132/joe-biden.png?ve=1&amp;tl=1 2x">\n\t<img src="//a57.foxnews.com/static.foxnews.com/static/orion/styles/img/fox-news/elections/headshots/68/68/joe-biden.png?ve=1&amp;tl=1" alt="joe-biden">\n\t</picture>\n\t</div>\n\t<div class="text">Biden Wins</div>\t\t\t\t\t\t\t\t</div>',winnerMarkupTrump="<h4 class='title'>"+currentState+'</h4><div class="info">\n\t<div class="m headshot">\n\t<picture><source srcset="//a57.foxnews.com/static.foxnews.com/static/orion/styles/img/fox-news/elections/headshots/68/68/donald-trump.png?ve=1&amp;tl=1, //a57.foxnews.com/static.foxnews.com/static/orion/styles/img/fox-news/elections/headshots/132/132/donald-trump.png?ve=1&amp;tl=1 2x">\n\t<img src="//a57.foxnews.com/static.foxnews.com/static/orion/styles/img/fox-news/elections/headshots/68/68/donald-trump.png?ve=1&amp;tl=1" alt="donald-trump">\n\t</picture>\n\t</div>\n\t<div class="text">Trump Wins</div>\t\t\t\t\t\t\t\t</div>';"dem"===winner?(currentView.html(winnerMarkupBiden),currentView.parent().addClass("dem"),currentView.parent().addClass("winner")):"rep"!==winner&&"gop"!==winner||(currentView.html(winnerMarkupTrump),currentView.parent().addClass("rep"),currentView.parent().addClass("winner"))}Proto.init=function(){isDialsPage&&(INITIALIZED||(INITIALIZED=!0,(nationDials||stateDials)&&Proto.loadData("all_races")))},Proto.loadData=function(allRaces){FeedAPI.Admin.getDataRefresh(function(FeedAdmin){!function(modes){Proto.loadDialData(allRaces,modes);var dropdown=$("select#election_2020_probability_dials");dropdown.on("change",function(){Proto.setSelector(dropdown)})}(FeedAdmin)})},Proto.loadDialData=function(race,modes){FeedAPI.Dial.getData(race,function(data){modes.data.raw.probabilitymeter&&modes.data.raw.probabilitymeter;if("pre"!==modes.views.electionMode()){function checkDialData(dialData){dialData&&Proto.setDial(dialData,modes)}var dialData=data.views.resultsPage();for(var id in dialData)checkDialData(dialData[id])}})},Proto.setDial=function(data,modes){var currentRace=data[0].race_id,dialContainer=-1<generalRaces.indexOf(currentRace)?nationDials:stateDials;if(0!==currentRace.length){var currentDial=dialContainer.find("[data-dial-id='"+currentRace+"']");0!==currentDial.length?"pre"!==modes.views.electionMode()&&function(race,data,dial){var dialHandle=dial.find(".dial-handle"),raceInfo=data,winnerParty=(raceInfo.error,raceInfo.winning_party||""),isWinner=raceInfo.called,raceProb=function(dial,dialInfo){var raceProb,dialWinFill=$(".dial-"+dialInfo.race_id).find(".win-fill");dialWinFill.removeClass("fill-dem"),dialWinFill.removeClass("fill-rep");var cand1isRep="rep"===dialInfo.cand1.party.toLowerCase()||"gop"===dialInfo.cand1.party.toLowerCase(),cand2isRep="rep"===dialInfo.cand2.party.toLowerCase()||"gop"===dialInfo.cand2.party.toLowerCase(),dialIsBOP=dial.parent().hasClass("dial-group-nation");{if(!cand1isRep&&!cand2isRep)return dial.find("svg").addClass("placeholder"),dial.find(".dial-handle").addClass("hide"),dial.find(".dial-number").addClass("hide"),dial.find(".text").html("No data at this time"),0;if("dem"!==dialInfo.cand1.party.toLowerCase()&&"dem"!==dialInfo.cand2.party.toLowerCase())return dial.find("svg").addClass("placeholder"),dial.find(".dial-handle").addClass("hide"),dial.find(".dial-number").addClass("hide"),dial.find(".text").html("No data at this time"),0;if(cand1isRep&&"dem"===dialInfo.cand2.party.toLowerCase())return raceProb=dialInfo.cand1.probability>dialInfo.cand2.probability?(.7<dialInfo.cand1.probability?dialWinFill.addClass("fill-rep"):dialWinFill.removeClass("fill-rep"),dialIsBOP||dial.find(".text").html("Trump Leads"),dialInfo.cand1.probability):dialInfo.cand1.probability<dialInfo.cand2.probability?(.7<dialInfo.cand2.probability?dialWinFill.addClass("fill-dem"):dialWinFill.removeClass("fill-dem"),dialIsBOP||dial.find(".text").html("Biden Leads"),"-"+dialInfo.cand2.probability):(dialIsBOP||dial.find(".text").html(""),dialInfo.cand2.probability);if("dem"===dialInfo.cand1.party.toLowerCase()&&cand2isRep)return dialInfo.cand1.probability>dialInfo.cand2.probability?(.7<dialInfo.cand1.probability?dialWinFill.addClass("fill-dem"):dialWinFill.removeClass("fill-dem"),dialIsBOP||dial.find(".text").html("Biden Leads"),raceProb="-"+dialInfo.cand1.probability):dialInfo.cand1.probability<dialInfo.cand2.probability?(.7<dialInfo.cand2.probability?dialWinFill.addClass("fill-rep"):dialWinFill.removeClass("fill-rep"),dialIsBOP||dial.find(".text").html("Trump Leads"),raceProb=dialInfo.cand2.probability):(raceProb=dialInfo.cand2.probability,dialIsBOP||dial.find(".text").html(""),raceProb)}}(dial,raceInfo),raceId=raceInfo.race_id,isRep="rep"===winnerParty.toLowerCase()||"gop"===winnerParty.toLowerCase(),dialWinFill=$(".dial-"+raceId).find(".win-fill"),dialIsBOP=dial.parent().hasClass("dial-group-nation");isWinner&&"dem"===winnerParty.toLowerCase()?(dialWinFill.hasClass("fill-rep")&&dialWinFill.removeClass("fill-rep"),raceProb=-.95,dialIsBOP||setWinnerView(dial,winnerParty.toLowerCase())):isWinner&&isRep&&(dialWinFill.hasClass("fill-dem")&&dialWinFill.removeClass("fill-dem"),raceProb=.95,dialIsBOP||setWinnerView(dial,winnerParty.toLowerCase()));var racePercentage=parseFloat((100*raceProb).toFixed(2)),handleRacePerc=racePercentage,formattedRacePercentage=Math.floor(Math.abs(racePercentage));$(".dial-number",dial).html((95<=formattedRacePercentage?"95":formattedRacePercentage)+"<span>%</span>"),!1===dial.hasClass("dial-"+raceId)&&dialHandle.addClass("dial-handle-"+raceId);86<(handleRacePerc=handleRacePerc<0?1.8*(handleRacePerc+50):1.8*(handleRacePerc-50))?handleRacePerc=86:handleRacePerc<-86&&(handleRacePerc=-86);var prevVal=PREV_VALUE[raceId]?PREV_VALUE[raceId]!==handleRacePerc&&PREV_VALUE[raceId]:(PREV_VALUE[raceId]=handleRacePerc,0);"number"==typeof prevVal?$({deg:prevVal}).animate({deg:handleRacePerc},{duration:1e3,step:function(val){dialHandle.css({transform:"rotate("+val+"deg)"})},done:function(){next()}}):next(!0);function next(alt){if(PREV_VALUE[raceId]=handleRacePerc,!(95<=formattedRacePercentage)){var diff=alt?3:5,offsetRacePerc=handleRacePerc-diff,offsetRacePerc2=handleRacePerc+diff,dialRaceAnimation=[".dial-handle-"+raceId+".dial-handle {","animation: handle"+raceId+"Toggle 5s 1","}","@keyframes handle"+raceId+"Toggle {","0% { ","transform: rotate("+handleRacePerc+"deg);"," }","10% {","transform: rotate("+offsetRacePerc+"deg);","}","30% {","transform: rotate("+offsetRacePerc2+"deg);","}","50% {","transform: rotate("+offsetRacePerc+"deg);","}","70% {","transform: rotate("+offsetRacePerc2+"deg);","}","80% {","transform: rotate("+handleRacePerc+"deg);","}","}"].join("\n");$('<style class="dialAnimationStyle" type="text/css">'+dialRaceAnimation+"</style>").appendTo(dialHandle),setTimeout(function(){$(".dialAnimationStyle").remove()},4e3)}}}(0,data[0],currentDial):function(dialContainer,currentRace,data,modes){var isRacePres="P"===(currentRace?currentRace.substring(3,4):""),currentState=data[0].state;if(isRacePres){var targetDial=dialContainer.find("[data-state='"+currentState.toUpperCase()+"']");if(0===targetDial.length)return;if(targetDial.find("svg").hasClass("placeholder"))"post"===modes.data.norm.states.AK.pollTimes.status&&targetDial.find(".text").html("Polls Closed. <br> Awaiting Data.")}}(dialContainer,currentRace,data,modes)}},Proto.setSelector=function(dropdown){var dialGroupStates=$(".dial-group-states"),items=dialGroupStates.find(".item");switch(dropdown.val()){case"hot-races":items.not(".hot-race").addClass("hide"),dialGroupStates.find(".item.hot-race").removeClass("hide");break;case"all":items.removeClass("hide");break;case"uncalled-races":dialGroupStates.find(".item.winner").addClass("hide"),items.not(".winner").removeClass("hide");break;case"called-races":items.not(".winner").addClass("hide"),dialGroupStates.find(".item.winner").removeClass("hide");break;default:console.log("no selected option")}}}});
Modulr.define("fox-news.elections.presidential:pages/live/modules/dials",["require","jquery","helper","feed"],function(require,$,Helper,FeedAPI){var target=$(".dials"),dialCollection=$(".collection-race-dials"),dialContainer=$(".dial-container"),dials=$(".dial"),currentState=target.attr("state-initial");window.location;return new function(){var Proto=this,INITIALIZED=!1,PREV_VALUE={},isHomePage=0<$(".election-2020-home").length,isSenatePage=0<$(".election-2020-senate").length,isHousePage=0<$(".election-2020-house").length,isStatePage=0<$(".election-2020-state").length,isGeneralPage=isHomePage||isSenatePage||isHousePage,senateDial=($(".dial-container",target),$(".dial-container",target).length,$(".dial-container.race-senate:not(.special)")),presidentialDial=(senateDial.length,isHomePage?$(".dial-container.race-president"):$(".dial-container.race-president",target)),houseDial=(presidentialDial.length,$(".dial-container.race-house"));houseDial.length;function fireDial(race,data,dial){var dialHandle=dial.find(".dial-handle"),raceInfo=data.results,winnerParty=(raceInfo.error,raceInfo.winning_party||""),isWinner=raceInfo.called,raceProb=function(dial,dialInfo){var dialWinFill=isGeneralPage?dialContainer.find(".win-fill"):dial.find(".win-fill");dialWinFill.removeClass("fill-dem"),dialWinFill.removeClass("fill-rep");var cand1isRep="rep"===dialInfo.cand1.party.toLowerCase()||"gop"===dialInfo.cand1.party.toLowerCase(),cand2isRep="rep"===dialInfo.cand2.party.toLowerCase()||"gop"===dialInfo.cand2.party.toLowerCase();{if(!cand1isRep&&!cand2isRep)return dial.addClass("hide"),0;if("dem"!==dialInfo.cand1.party.toLowerCase()&&"dem"!==dialInfo.cand2.party.toLowerCase())return dial.addClass("hide"),0;if(cand1isRep&&"dem"===dialInfo.cand2.party.toLowerCase())return dialInfo.cand1.probability>dialInfo.cand2.probability?(.7<dialInfo.cand1.probability?dialWinFill.addClass("fill-rep"):dialWinFill.removeClass("fill-rep"),dialInfo.cand1.probability):dialInfo.cand1.probability<dialInfo.cand2.probability?(.7<dialInfo.cand2.probability?dialWinFill.addClass("fill-dem"):dialWinFill.removeClass("fill-dem"),"-"+dialInfo.cand2.probability):dialInfo.cand2.probability;if("dem"===dialInfo.cand1.party.toLowerCase()&&cand2isRep)return dialInfo.cand1.probability>dialInfo.cand2.probability?(.7<dialInfo.cand1.probability?dialWinFill.addClass("fill-dem"):dialWinFill.removeClass("fill-dem"),"-"+dialInfo.cand1.probability):(dialInfo.cand1.probability<dialInfo.cand2.probability&&(.7<dialInfo.cand2.probability?dialWinFill.addClass("fill-rep"):dialWinFill.removeClass("fill-rep")),dialInfo.cand2.probability)}}(dial,raceInfo),raceId=raceInfo.race_id,isRep="rep"===winnerParty.toLowerCase()||"gop"===winnerParty.toLowerCase(),dialWinFill=isGeneralPage?dialContainer.find(".win-fill"):dial.find(".win-fill");isWinner&&"dem"===winnerParty.toLowerCase()?(raceProb=-.95,dialWinFill.hasClass("fill-rep")&&dialWinFill.removeClass("fill-rep"),dialWinFill.addClass("fill-dem")):isWinner&&isRep&&(raceProb=.95,dialWinFill.hasClass("fill-dem")&&dialWinFill.removeClass("fill-dem"),dialWinFill.addClass("fill-rep"));var racePercentage=parseFloat((100*raceProb).toFixed(2)),handleRacePerc=racePercentage,formattedRacePercentage=Math.floor(Math.abs(racePercentage));$(".dial-number",dial).html((95<=formattedRacePercentage?"95":formattedRacePercentage)+"<span>%</span>"),!1===dial.hasClass("dial-handle-"+raceId)&&dialHandle.addClass("dial-handle-"+raceId),86<(handleRacePerc=handleRacePerc<0?1.8*(handleRacePerc+50):1.8*(handleRacePerc-50))?handleRacePerc=86:handleRacePerc<-86&&(handleRacePerc=-86);var prevVal=PREV_VALUE[raceId]?PREV_VALUE[raceId]!==handleRacePerc&&PREV_VALUE[raceId]:(PREV_VALUE[raceId]=handleRacePerc,0);function next(alt){if(PREV_VALUE[raceId]=handleRacePerc,!(95<=formattedRacePercentage)){var diff=alt?3:5,offsetRacePerc=handleRacePerc-diff,offsetRacePerc2=handleRacePerc+diff,dialRaceAnimation=[".dial-handle-"+raceId+".dial-handle {","animation: handle"+raceId+"Toggle 5s 1","}","@keyframes handle"+raceId+"Toggle {","0% { ","transform: rotate("+handleRacePerc+"deg);"," }","10% {","transform: rotate("+offsetRacePerc+"deg);","}","30% {","transform: rotate("+offsetRacePerc2+"deg);","}","50% {","transform: rotate("+offsetRacePerc+"deg);","}","70% {","transform: rotate("+offsetRacePerc2+"deg);","}","80% {","transform: rotate("+handleRacePerc+"deg);","}","}"].join("\n");$('<style class="dialAnimationStyle" type="text/css">'+dialRaceAnimation+"</style>").appendTo(dialHandle),setTimeout(function(){$(".dialAnimationStyle").remove()},4e3)}}"number"==typeof prevVal?$({deg:prevVal}).animate({deg:handleRacePerc},{duration:1e3,step:function(val){dialHandle.css({transform:"rotate("+val+"deg)"})},done:function(){next()}}):next(!0)}Proto.init=function(){if(!(isHomePage&&0===presidentialDial.length||!isHomePage&&0===target.length||INITIALIZED)){if(INITIALIZED=!0,!isHomePage&&!currentState)return dialCollection.addClass("hide"),dials.addClass("hide"),void target.addClass("hide");Proto.loadData(currentState)}},Proto.loadData=function(currentState){FeedAPI.Admin.getDataRefresh(function(FeedAdmin){!function(modes){isHomePage?Proto.loadDialData("US-P",modes):isSenatePage?Proto.loadDialData("US-S",modes):isHousePage?Proto.loadDialData("US-H",modes):isStatePage&&FeedAPI.DialRaceList.getData(function(raceData){for(var raceList=raceData.views.racesByState(currentState),i=0;i<raceList.length;i++){Proto.loadDialData(raceList[i],modes,raceList)}})}(FeedAdmin)})},Proto.loadDialData=function(race,modes,raceList){console.log("RACE ID",race),FeedAPI.Dial.getData(race,function(data){var dialAdmin=modes.data.raw.probabilitymeter?modes.data.raw.probabilitymeter:"";if("pre"===modes.views.electionMode()||dialAdmin.hideAllPages)return target.addClass("hide"),dialCollection.addClass("hide"),void dials.addClass("hide");if(isHomePage&&!0!==dialAdmin.displayHome)return dialContainer.find(".race-president").addClass("hide"),target.addClass("hide"),dialCollection.addClass("hide"),void dials.addClass("hide");if(isStatePage&&!0!==dialAdmin.displayState)return target.addClass("hide"),dialCollection.addClass("hide"),void dials.addClass("hide");if(isHousePage&&!0!==dialAdmin.displayGovernor)return dialContainer.find(".race-house").addClass("hide"),target.addClass("hide"),dialCollection.addClass("hide"),void dials.addClass("hide");if(isSenatePage&&!0!==dialAdmin.displaySenate)return dialContainer.find(".race-senate").addClass("hide"),target.addClass("hide"),dialCollection.addClass("hide"),void dials.addClass("hide");!function(dialData){dialData&&Proto.setDial(dialData,modes,race,raceList)}(data.views.results())})},Proto.setDial=function(data,modes,race,raceList){var currentRaceType,currentDial,houseRace=null,senateRace=null,presidentialRace=null;if(isStatePage){var raceSubArray=function(array,what){for(var newArray=[],i=0;i<array.length;i++)array[i].substring(0,4)===what&&(newArray.push(array[i]),0);return newArray}(raceList,race.substring(0,4));switch(1<raceSubArray.length&&raceSubArray.indexOf(race),data.raceType.toLowerCase()){case"senate":currentRaceType="S",senateRace=data,currentDial=target.find("[data-dial-id='"+race+"']");break;case"presidential":currentRaceType="P",presidentialRace=data,currentDial=target.find("[data-dial-id='"+race+"']");break;case"governor":case"house":currentRaceType="G",houseRace=data,currentDial=target.find("[data-dial-id='"+race+"']")}}else switch(data.results.race_id){case"US-S":currentRaceType="S",senateRace=data,currentDial=senateDial;break;case"US-P":currentRaceType="P",presidentialRace=data,currentDial=presidentialDial;break;case"US-H":currentRaceType="G",houseRace=data,currentDial=houseDial}if(currentDial&&(target.removeClass("hide"),dials.removeClass("hide"),dialCollection.removeClass("hide"),dialContainer.removeClass("hide"),(currentDial=$(currentDial)).removeClass("hide"),"pre"===modes.views.electionMode()&&(houseDial.addClass("hide"),senateDial.addClass("hide"),presidentialDial.addClass("hide")),"pre"!==modes.views.electionMode()))switch(currentRaceType){case"S":fireDial("senate",senateRace,currentDial);break;case"P":fireDial("presidential",presidentialRace,currentDial);break;case"G":fireDial("house",houseRace,currentDial)}}}});
Modulr.define("fox-news.elections.presidential:pages/live/modules/governors.map",["require","jquery","lodash","helper","feed","fox-news.elections.map.v3:api","core.base:utils/detector","core.plugins:DateTime"],function(require,$,_,Helper,FeedAPI,MapAPI){require("core.base:utils/detector"),require("core.plugins:DateTime");return new function(){var Proto=this,INITIALIZED=!1,MAP=null,CURRENT_DATASET={},ADMIN_DATASET={},DEFAULT_NO_COLOR="#ffffff",NO_RACES=["AL","AK","AZ","AR","CA","CO","CT","DC","FL","GA","HI","ID","IL","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","NE","NV","NJ","NM","NY","OH","OK","OR","PA","RI","SC","SD","TN","TX","VA","WI","WY"],viewport=Helper.getCurrentView(),contain=$(".infographic"),bubbleHolder=(contain.find(".select-wrap"),contain.find(".bubbles")),target="mobile"===viewport?contain.find(".mobile"):contain.find(".tablet-desktop .map");function getColor(type,party){var defaultColor={fill:DEFAULT_NO_COLOR,textColor:"#222222"};return type&&"none"!==type?{winner:{rep:{fill:"#d20f26",textColor:"#ffffff"},dem:{fill:"#1b4e81",textColor:"#ffffff"},ind:{fill:"#703089",textColor:"#ffffff"},oth:{fill:"#999999",textColor:"#222222"}},lead:{rep:{fill:"#ffeaec",textColor:"#222222"},dem:{fill:"#ddeeff",textColor:"#222222"},ind:{fill:"#f4e6f9",textColor:"#222222"},oth:{fill:"#dddddd",textColor:"#222222"}}}[type][party]:defaultColor}function getParty(code){var type=null;switch(code){case"R":type="rep";break;case"D":type="dem";break;case"I":type="ind";break;default:type="oth"}return type}function getColors(code,data){for(var item,cand,type,color,info={state:code,results:[]},i=0;i<data.length;i++)item=data[i],void 0,cand=item.results[0],type=cand.isWinner?"winner":0<cand.votes.count?"lead":"none",color=function(){var code=getParty(cand.partyCode);return getColor(type,code)}(),info.results.push({type:type,fill:color.fill,textColor:color.textColor});return info}Proto.init=function(){0!==target.length&&(INITIALIZED||(INITIALIZED=!0,MapAPI.createGovernorMap(target,{},function(MapAPI){MAP=MapAPI;for(var i=0;i<NO_RACES.length;i++)MAP.colorize(NO_RACES[i],{fill:"#f1f1f1",textColor:"#999999"});Proto.loadData()})))},Proto.loadData=function(){if(!MAP)return Proto.init();FeedAPI.Summary.getDataRefresh("governor",function(data){FeedAPI.Admin.getData(function(FeedAdmin){data.views;var stateResults=data.views.resultsByState();for(var id in stateResults){data.views.resultsByState(id)[0].stateAdminInfo.pollTimes.status;var stateInfo=FeedAdmin.views.stateInfo(id)||null,pollInfo=stateInfo?stateInfo.pollTimes:null,pollStatus=stateInfo?pollInfo.status:null;if("pre"===FeedAdmin.views.electionMode()||"pre"===pollStatus||null===pollStatus)ADMIN_DATASET[id]=pollStatus,"mobile"!==viewport&&(MAP.tooltip(id,stateResults,FeedAdmin.views),Proto.setBubbles(id,stateResults[id],!0)),MAP.colorize(id,{fill:"#ffffff",textColor:"#222222"});else if(Helper.isUpdateData(CURRENT_DATASET[id],stateResults[id])||Helper.isUpdateData(ADMIN_DATASET[id],pollStatus)){CURRENT_DATASET[id]=stateResults[id],ADMIN_DATASET[id]=pollStatus;var colorInfo=getColors(id,stateResults[id]);MAP.colorize(id,colorInfo),"mobile"!==viewport&&(MAP.tooltip(id,stateResults,FeedAdmin.views),Proto.setBubbles(id,stateResults[id],!1))}}})})},Proto.setBubbles=function(state,stateData,pre){var cand=stateData[0].results[0],votes=cand.votes.count,mode=pre?"removeClass":"addClass",bubble=bubbleHolder.find(".bubble:contains("+state+")"),winner=stateData[0].winner?"winner":0<votes?"lead":"none",flipped=stateData[0].isFlipped?" flip":"",party="winner"==winner||"lead"==winner?getParty(cand.partyCode):"",prevParty=(getColor(winner,party),bubble.attr("class").replace("bubble","")),type=stateData[0].winner?party+flipped:0<votes?party+" lean":"";prevParty!==type&&bubble.removeClass(prevParty),bubble[mode](type)}}});
Modulr.define("fox-news.elections.presidential:pages/live/modules/house.bubbles",["require","jquery","helper","feed","lodash","core.plugins:OnWindowResize"],function(require,$,Helper,FeedAPI,_){require("core.plugins:OnWindowResize");var stateCode=$("body").attr("data-state-code"),holder=$(".item-bubble-chart");return new function(){var Proto=this,CURRENT_DATASET={};Proto.init=function(){!0||Proto.init(),0<holder.length&&Proto.loadData()},Proto.loadData=function(){FeedAPI.State.getDataRefresh("House",stateCode,function(dataset){FeedAPI.Admin.getData(function(FeedAdmin){var admin=FeedAdmin.views,views=dataset.views,pollStatus=(views.stateInfo(stateCode),_.get(admin.stateInfo(stateCode),"pollTimes.status","pre")),results=views.results();if("pre"===FeedAdmin.views.electionMode||"pre"===pollStatus)return!1;if(Helper.isUpdateData(CURRENT_DATASET,results)){CURRENT_DATASET=results;var INFO={dem:0,rep:0,ind:0,districts:null};$.each(results,function(district,info){Proto.setDistricts(district,info,INFO)}),Proto.setTotals(INFO)}})})},Proto.setTotals=function(INFO){holder.find(".bubble.is-large").each(function(){var el=$(this),party=el.attr("data-party");FeedAPI.methods.numUpdate(el,INFO[party],{format:"num",formatStr:"${num}"})})},Proto.setDistricts=function(district,info,INFO){var target=holder.find(".group-seats .bubble[data-district="+district+"]"),prevWinner=target.attr("class").replace("bubble","");target.removeClass(prevWinner),$.each(info.candidateResults,function(key,data){if(data.isWinner){var abbrev=data.partyName.toLowerCase().substring(0,3);INFO[abbrev]+=1,prevWinner!==abbrev&&(target.removeClass(prevWinner),INFO[prevWinner]-=1),target.addClass(abbrev)}})}}});
Modulr.define("fox-news.elections.presidential:pages/live/modules/house.chart",["require","jquery","helper","feed","lodash","fox-news.elections.map.v3:api","core.plugins:OnWindowResize"],function(require,$,Helper,FeedAPI,_,MapAPI){require("core.plugins:OnWindowResize");return new function(){var Proto=this,INITIALIZED=!1,CHART=null,CURRENT_DATASET=null,target=$(".collection-party-race.is-house").find(".tab-chart .chart");Proto.init=function(){0!==target.length&&(INITIALIZED||(INITIALIZED=!0,MapAPI.createHouseChart(target,{},function(ChartAPI){CHART=ChartAPI,Proto.loadData()})))},Proto.loadData=function(){if(!CHART)return Proto.init();FeedAPI.BOP.getDataRefresh(function(BOPInfo){FeedAPI.Admin.getData(function(FeedAdmin){var houseResults=BOPInfo.views.results().house;"pre"!==FeedAdmin.views.electionMode()&&Helper.isUpdateData(CURRENT_DATASET,houseResults)&&(CURRENT_DATASET=houseResults,Proto.renderChart(houseResults))})})},Proto.renderChart=function(feedInfo){var data=feedInfo.details,seats=feedInfo.totals,info=(data.startVals,{}),total=seats.expectedTotal,colors=[];function set(len,str){for(var i=0;i<len;i++)colors.push(str)}$.each(data,function(party,val){var seats=data[party].curr+data[party].start,partyColor=Proto.getColor(party);info[party]||(info[party]={}),info[party].val=seats,info[party].hex=partyColor}),function(){for(var order=["dem","oth","empty","rep"],i=0;i<order.length;i++){var party=order[i];if("empty"===party)set(total-info.rep.val-colors.length,"#ffffff");else info[party]&&set(info[party].val,info[party].hex)}}(),CHART.colorize(colors)},Proto.getColor=function(party){var hex="#FFFFFF";switch(party){case"rep":hex="#d20f26";break;case"dem":hex="#1b4e81";break;case"oth":hex="#999999";break;default:hex="#FFFFFF"}return hex},Proto.resize=function(){CHART&&CHART.event.ready(function(){CHART.event.trigger("resize")})}}});
Modulr.define("fox-news.elections.presidential:pages/live/modules/house.map",["require","jquery","helper","feed","lodash","fox-news.elections.map.v3:api","core.plugins:OnWindowResize"],function(require,$,Helper,FeedAPI,_,MapAPI){require("core.plugins:OnWindowResize");return new function(){var Proto=this,INITIALIZED=!1,MAP=null,CURRENT_DATASET={},DEFAULT_NO_COLOR="#ffffff",target=$(".collection-party-race.is-house").find(".tab-map .map");function getColors(code,data){for(var item,cand,runoff,type,color,info={code:code,districts:[]},i=0;i<data.length;i++)item=data[i],void 0,cand=item.results[0],runoff=item.isRunoff||!1,type=runoff?"runoff":cand.isWinner?"winner":0<cand.votes.count?"lead":"none",color=function(){var code=function(code){var type=null;switch(code){case"R":type="rep";break;case"D":type="dem";break;case"I":type="independent";break;default:type="other"}return type}(cand.partyCode);return function(type,party){return type&&"none"!==type&&"runoff"!==type?{winner:{rep:"#d20f26",dem:"#1b4e81",independent:"#703089",other:"#999999"},lead:{rep:"#ffeaec",dem:"#ddeeff",independent:"#f4e6f9",other:"#dddddd"}}[type][party]:DEFAULT_NO_COLOR}(type,code)}(),info.districts.push({type:type,fill:color,fips:item.districtNumber,id:cand.candidate.npid});return info}Proto.init=function(){0!==target.length&&(INITIALIZED||(INITIALIZED=!0,MapAPI.createHouseMap(target,{},function(MapAPI){MAP=MapAPI,Proto.loadData()})))},Proto.loadData=function(){if(!MAP)return Proto.init();FeedAPI.Summary.getDataRefresh("house",function(dataset){FeedAPI.Admin.getData(function(FeedAdmin){if("pre"!==FeedAdmin.views.electionMode()){var stateResults=dataset.views.resultsByState();for(var id in stateResults)if(Helper.isUpdateData(stateResults[id],CURRENT_DATASET[id])){CURRENT_DATASET[id]=stateResults[id];var colorInfo=getColors(id,stateResults[id]);MAP.colorize(colorInfo)}}})})},Proto.resize=function(){MAP&&MAP.event.ready(function(){MAP.event.trigger("resize")})}}});
Modulr.define("fox-news.elections.presidential:pages/live/modules/loadmore",["require","jquery","lodash","ISA"],function(require,$,_,ISA){return new function(){this.init=function(){var $collection=$(".collection.has-load-more"),$articles=$collection.find(".article.hide"),$button=$collection.find(".js-load-more a");0<$articles.length&&0<$button.length?$button.on("click",function(evt){evt.preventDefault();var amount=$articles.length<5?$articles.length:5;$articles.slice(0,amount).removeClass("hide"),0===($articles=$collection.find(".article.hide")).length&&$button.addClass("hide"),ISA&&"function"==typeof ISA.track&&ISA.track("show-more")}):0===$articles.length&&$button.addClass("hide")}}});
Modulr.define("fox-news.elections.presidential:pages/live/modules/my.races",["require","jquery","helper","feed","lodash","promise","@live/models/tables","@live/models/my.races","core.plugins:DateTime","core.plugins:BrowserVisibilityState"],function(require,$,Helper,FeedAPI,_){var MyRacesStore=require("@live/models/my.races"),Visibility=require("core.plugins:BrowserVisibilityState"),Promise=require("promise");return new function(){var Proto=this,INITIALIZED=!1,REFRESH_READY=!0,CURR_COOKIE=MyRacesStore.get(!0),CURRENT_VISIBILITY=null,CURRENT_DATASET={},Race=require("@live/models/tables"),DateTime=require("core.plugins:DateTime"),MyRaces=new Race,holder=$(".collection-race-table"),content=holder.find(".content.race-table"),notice=($(".race-table-group"),content.find(".notice")),loader=content.find(".loading");function getParty(code){return/rep|dem|ind|oth/i.test(code)?code.slice(0,3).toLowerCase():"oth"}Proto.init=function(){var timeout;INITIALIZED||(INITIALIZED=!0,MyRacesStore.isAvailable()&&(0<MyRacesStore.get().length?Proto.getFeedData():(loader.remove(),notice.removeClass("hide"))),Visibility.onChange(function(state){CURRENT_VISIBILITY=state}),MyRacesStore.XDComm.listen(function(info){var raw=info.raw;CURR_COOKIE&&raw&&CURR_COOKIE!==raw&&"hidden"===CURRENT_VISIBILITY&&(CURR_COOKIE=raw,window.location.reload()),poll()}),poll());function poll(){clearTimeout(timeout),timeout=setTimeout(function(){MyRacesStore.XDComm.reload()},5e3)}},Proto.getInfo=function(){var items=MyRacesStore.getByKey(),obj={},arr=[];for(var key in items)obj[key]=_.map(items[key],function(val){var sp=val.split("-");return sp[0]=sp[0].toUpperCase(),sp.join("-")}),-1===arr.indexOf(key)&&arr.push(key);return function(){var i=arr.indexOf("president");if(-1!==i&&0!==i){var p=arr.splice(i,1);arr.unshift(p[0])}}(),{items:obj,types:arr}},Proto.getFeedData=function(){var timeout;FeedAPI.Admin.getDataRefresh(function(FeedAdmin){REFRESH_READY&&(REFRESH_READY=!1,clearTimeout(timeout),timeout=setTimeout(function(){var ordered=function(items){function set(id){arr.push({id:id,info:items[id]})}for(var arr=[],order=["president","house","senate","governor"],i=0;i<order.length;i++){var id=order[i];items[id]&&set(id)}return arr}(Proto.getInfo().items),PromiseArr=function(){for(var arr=[],i=0;i<ordered.length;i++){var order=ordered[i];set(order,order.id,order.info)}function set(order,id,list){5<=list.length&&-1<["house","governor"].indexOf(id)||"president"===id?arr.push(new Promise(function(resolve){function done(data){resolve({type:"national",id:id,states:list,data:data})}"president"===id?FeedAPI.National.getData(function(data){done(data)}):FeedAPI.Summary.getData(id,function(data){done(data)})})):function(){function get(id,stateId,stateCode){var code=stateCode;/\-S$/.test(stateId)&&"AZ"!==code&&(code+="1"),arr.push(new Promise(function(resolve){FeedAPI.State.getData(id,code,function(data){resolve({type:"state",id:id,states:[stateId],data:data})})}))}for(var i=0;i<list.length;i++){var stateId=list[i].toUpperCase(),stateCode=stateId.slice(0,2);get(id,stateId,stateCode)}}()}return arr}();Promise.all(PromiseArr).then(function(payload){if(!!(Array.isArray(payload)&&0<payload.length)){loader.remove();for(var i=0;i<payload.length;i++){var item=payload[i];Proto.generate(item.type,{id:item.id,states:item.states,data:item.data,FeedAdmin:FeedAdmin})}REFRESH_READY=!0}})},500))})},Proto.generate=function(itemType,properties){var type=properties.id,FeedInfo=properties.data,FeedAdmin=properties.FeedAdmin,adminMode=FeedAdmin.views.electionMode()||"pre",states=properties.states||null;properties.state;function getTarget(state,dist,isSpecial){var res=content.find('.race-table-group[data-state="'+state+'"][data-race="'+type+'"][data-init="1"]');return dist?res=res.filter(function(){return $(this).data("district")===parseInt(dist,10)}):isSpecial&&(res=res.filter(function(){return 1===$(this).data("special")})),res}function getStateInfo(stateId){var state=stateId.slice(0,2).toUpperCase(),code="house"===type?state:stateId,dist="house"===type?stateId.slice(3):null,isSpecial="S"===stateId.slice(3);return{index:function(){var arr=[state];if(dist)arr.push("dist-"+dist);else if(isSpecial)arr.push("S");else if(/at large|district/i.test(stateId)){var sp=(stateId.split("-")[1]||"").trim();if(/at large/i.test(sp))arr.push(0);else{var match=sp.match(/[0-9]$/);match&&arr.push(match[0])}}return arr.join("-")}(),state:state,code:code,dist:dist,isSpecial:isSpecial}}CURRENT_DATASET[type]||(CURRENT_DATASET[type]={}),function(){var res;if("national"===itemType)for(var i=0;i<states.length;i++)for(var info=getStateInfo(states[i],FeedInfo),state=info.code,dist=info.dist,isSpecial=info.isSpecial,index=info.index,items=(res=void 0,res=FeedInfo.views.resultsByState(state,dist),Array.isArray(res)?1<res.length&&"senate"===type&&(res=isSpecial&&res[1]?[res[1]]:[res[0]]):res=[res],res),z=0;z<items.length;z++){var data=items[z],stateMode=_.get(data,"stateAdminInfo.pollTimes.status","during"),stateObj={stateCode:state,raceType:type,mode:"pre"===adminMode?"pre":stateMode,data:data,dist:dist,isSpecial:isSpecial};CURRENT_DATASET[type][index]||(CURRENT_DATASET[type][index]={initialized:!1}),CURRENT_DATASET[type][index].initialized?Proto.updateData(getTarget(state,dist,isSpecial),stateObj):(CURRENT_DATASET[type][index].initialized=!0,Proto.generateMarkup(stateObj,function(){Proto.updateData(getTarget(state,dist,isSpecial),stateObj)}))}}(),function(){if("state"===itemType&&"house"===type)for(var i=0;i<states.length;i++){var info=getStateInfo(states[i],FeedInfo),state=info.state,dist=info.dist,isSpecial=info.isSpecial,index=(info.items,info.index),districtData=FeedInfo.views.results()[dist],stateInfo=FeedInfo.views.stateInfo(state),feedMode=FeedAdmin.views.electionMode(),stateIndex=[state,dist].join("-"),stateMode=_.get(stateInfo,"pollTimes.status",null),pct=_.get(districtData,"districtTotals.precinctsReporting",null),mode="pre"===feedMode?"pre":stateMode;stateInfo.results=_.get(districtData,"candidateResults",[]),stateInfo.FOXPrecinctsReporting=pct;var stateObj={stateCode:stateIndex,raceType:"house",mode:mode,data:stateInfo,dist:dist};CURRENT_DATASET[type][index]||(CURRENT_DATASET[type][index]={initialized:!1}),CURRENT_DATASET[type][index].initialized?Proto.updateData(getTarget(state,dist,isSpecial),stateObj):(CURRENT_DATASET[type][index].initialized=!0,Proto.generateMarkup(stateObj,function(){Proto.updateData(getTarget(state,dist,isSpecial),stateObj)}))}}(),function(){if("state"===itemType&&"house"!==type)for(var i=0;i<states.length;i++){var info=getStateInfo(states[i],FeedInfo),state=info.state,dist=info.dist,isSpecial=info.isSpecial,index=info.index,data=(info.items,FeedInfo.views.results()),stateInfo=FeedInfo.views.stateInfo(state)||null,pct=FeedInfo.views.totals().FOXPrecinctsReporting,stateMode=stateInfo.pollTimes.status||null,mode="pre"===adminMode?"pre":stateMode;stateInfo.results=data,stateInfo.FOXPrecinctsReporting=pct;var stateObj={stateCode:state,raceType:type,mode:mode,data:stateInfo,dist:dist,isSpecial:isSpecial};CURRENT_DATASET[type][index]||(CURRENT_DATASET[type][index]={initialized:!1}),CURRENT_DATASET[type][index].initialized?Proto.updateData(getTarget(state,dist,isSpecial),stateObj):(CURRENT_DATASET[type][index].initialized=!0,Proto.generateMarkup(stateObj,function(){Proto.updateData(getTarget(state,dist,isSpecial),stateObj)}))}}()},Proto.updateData=function(holder,stateInfo){"pre"===stateInfo.mode?MyRaces.throwDashes(holder,stateInfo.data):MyRaces.setTable(holder,stateInfo.stateCode,stateInfo.raceType+"-my-races",stateInfo.data)},Proto.generateMarkup=function(stateInfo,callback){var name,admin=stateInfo.data.stateAdminInfo||stateInfo.data,stateUrl=admin.name.toLowerCase().replace(" ","-")||"",open=DateTime(admin.pollTimes.open,"${hr}:${min} ${ampm} ET"),close=DateTime(admin.pollTimes.close,"${hr}:${min} ${ampm} ET"),obj={},dist=_.get(stateInfo,"dist",null),stateDisplay=(name=admin.name,/at large|district/i.test(stateInfo.stateCode)&&(name+=" - "+stateInfo.stateCode.slice(3)),name);obj.stateCode="house"===stateInfo.raceType?stateInfo.stateCode.slice(0,2):stateInfo.stateCode,obj.stateUrl=stateUrl,obj.stateDisplay=stateDisplay,obj.race=stateInfo.raceType,obj.typeCap=stateInfo.raceType.charAt(0).toUpperCase()+stateInfo.raceType.substr(1),obj.dist=dist,obj.distDisplay=dist?parseInt(dist,10)<10?"0"+dist:dist:"",obj.isSpecial=stateInfo.isSpecial,obj.specialAttr=stateInfo.isSpecial?"1":"",obj.pollText="pre"===stateInfo.mode?"PRE":"open"===stateInfo.mode||"during"===stateInfo.mode?"OPEN":"CLOSED",obj.pollTime="pre"===stateInfo.mode?"Polls open at "+open:"open"===stateInfo.mode?"Polls Close at "+close:"Polls Closed",obj.pollClass="open"===stateInfo.mode?"is-open":"closed"===stateInfo.mode||"post"===stateInfo.mode?"is-closed":"",obj.percent="pre"===stateInfo.mode?"":"Reporting "+stateInfo.data.FOXPrecinctsReporting+"% in",obj.winner=function(info){for(var results=info.data.results,winner=null,i=0;i<results.length;i++){var candInfo=results[i];if(candInfo.isWinner){var partyName=getParty(_.get(candInfo,"candidate.partyName",candInfo.partyName||"oth"));winner="winner-"+partyName.slice(0,3).toLowerCase();break}}return winner}(stateInfo)||"",obj.cand=function(type,data,mode){for(var markupHolder=[],obj=[],candInfo=data.results,i=0;i<candInfo.length;i++){var cand=candInfo[i],lastName=cand.candidate.lastName.toString(),fullName=cand.candidateDisplay?cand.candidateDisplay.opt1.toString():lastName,npid=cand.candidate.npid,partyShort=getParty(_.get(cand,"candidate.partyName",cand.partyName||"oth")),partyCode=partyShort.slice(0,1).toUpperCase(),winner=cand.isWinner?"winner "+partyShort:"";obj.npid=npid,obj.party_short=partyShort,obj.party_code=partyCode,obj.party_color=-1===["dem","rep","ind","gre"].indexOf(partyShort)?"oth":"",obj.last_name=lastName,obj.full_name=fullName,obj.winner=winner,obj.votes="pre"===mode?"-":cand.votesDisplay.count,obj.percent="pre"===mode?"-":cand.votes.percentage+"%",obj.incumbent=cand.isIncumbent?'<span class="icon icon-incumbent">                    <span class="is-short">In</span>                    <span class="is-long">Incumbent</span>                    </span>':"";var newTemplate=_.template('<tr class="candidate <%= party_color %> <%= winner%>" data-npid="<%= npid %>">                    <td class="name">                        <span class="icon icon-party icon-party-<%= party_short %>"> <%= party_code %></span>                        <span class="full-name">                        <span class="is-short"><%=last_name%></span>                        <span class="is-long"><%=full_name%></span>                        </span>                        <%= incumbent %>                    </td>                    <td class="votes">                        <span class="count"><%= votes %></span>                    </td>                    <td class="percentage">                        <span class="percent"><%= percent %></span>                    </td>                </tr>');markupHolder.push(newTemplate(obj))}return markupHolder=markupHolder.join("")}(stateInfo.raceType,stateInfo.data,stateInfo.mode),obj.contested="president"===stateInfo.raceType&&!0===_.get(stateInfo.data,"stateAdminInfo.contested",!1)?"is-contested":"";var markup=_.template('<table class="race-table-group <%= winner %> <%= contested %>" data-state="<%= stateCode %>" data-race="<%= race %>" data-district="<%= dist %>" data-special="<%= specialAttr %>" data-init=1>                <thead class="race-table-col-headers">                <tr>                    <th class="name">Candidates</th>                    <th class="votes">Votes</th>                    <th class="percentage">%</th>                </tr>                </thead>                <tbody class="candidates">                <tr class="race-table-header">                    <th class="table-header" colspan="3">                        <div class="header">                            <span class="state">                            <a href="/elections/2020/general-results/state/<%= stateUrl %>"><%= stateDisplay %> <%= distDisplay %> (<%=typeCap%>)</a>                            <% if (contested) { %>                                <span class="icon icon-contested">Contested</span>                            <% } %>                            <% if (isSpecial) { %>                                <span class="icon icon-special">                                    <span class="is-short">*</span>                                    <span class="is-long">Special Election</span>                                </span>                            <% } %>                            </span>                        </div>                        <div class="info">                            <button class="favorite active js-enable">Toggle Favorite</button>                        </div>                    </th>                </tr>                <%= cand %>                </tbody>                <tfoot class="race-table-footer">                <tr>                    <td class="status" colspan="3">                        <span class="poll-info <%= pollClass %>">                        <span class="pill <%= pollClass %>"><%= pollText %></span>                        <%= pollTime %>                        </span>                        <span class="percent-in"><%= percent %></span>                    </td>                </tr>                </tfoot>                </table>')(obj);content.append(markup),MyRacesStore.setInteraction(content.find(".favorite")),"function"==typeof callback&&callback()},holder.off("click").on("click",".favorite",function(){var el=$(this),rTable=el.closest(".race-table-group"),rType=rTable.data("race"),rDist="house"===rType?"-"+rTable.data("district"):rTable.data("special")?"-S":"",race=rTable.data("state")+rDist,itemId=MyRacesStore.generateId([rType,race]);el.hasClass("active")?(el.removeClass("active"),MyRacesStore.remove(itemId)):(el.addClass("active"),MyRacesStore.set(itemId))})}});
Modulr.define("fox-news.elections.presidential:pages/live/modules/race.tables/governor-county",["require","jquery","helper","feed","@live/models/tables"],function(require,$,Helper,FeedAPI){var Race=require("@live/models/tables"),holder=$(".collection-race-table[data-table='race-table-governor-county']"),tables=holder.find(".race-table").find(".race-table-group"),stateCode=$("body").data("state-code"),Gov_Race=null;return new function(){var INITIALIZED=!1,CURRENT_DATASET={};this.init=function(){INITIALIZED||(INITIALIZED=!0,FeedAPI.County.getDataRefresh("Governor",stateCode,function(StateInfo){FeedAPI.Admin.getData(function(FeedAdmin){tables.each(function(){var el=$(this);Gov_Race=Gov_Race||new Race({table:tables,type:"Governor"}),function(el,StateInfo,FeedAdmin){var fips=el.data("county-fips"),data=(el.find(".status"),StateInfo.views.resultsByCounty(fips)),stateInfo=FeedAdmin.views.stateInfo(stateCode),distInfo=StateInfo.views.resultsByCounty(fips),feedMode=FeedAdmin.views.electionMode(),stateMode=stateInfo.pollTimes.status||null;"pre"===feedMode||"pre"===stateMode||null===stateMode?Gov_Race.throwDashes(el,stateInfo):Helper.isUpdateData(CURRENT_DATASET[fips],data)&&(CURRENT_DATASET[fips]=data,Gov_Race.setTable(el,distInfo,"governor-county",data))}(el,StateInfo,FeedAdmin)})})}),holder.find($("select#election_2020_governor_county")).change(function(evt){evt.preventDefault();var el=$(this),val=el.val(),table=el.closest(".collection-race-table"),groups=table.find(".race-table-group"),selected=table.find(".race-table-group[data-county-fips="+val+"]");groups.addClass("hide"),selected.removeClass("hide")}))}}});
Modulr.define("fox-news.elections.presidential:pages/live/modules/race.tables/governor",["require","jquery","helper","feed","@live/models/tables"],function(require,$,Helper,FeedAPI){var statePage="state"===Helper.getPageName(),stateCode=statePage&&$("body").data("state-code");return new function(){var Proto=this,Race=require("@live/models/tables"),Gov_Race=null,INITIALIZED=!1,CURRENT_DATASET={},POLLS_DATASET={},TOTALS_DATASET={},holder=$(".collection-race-table[data-table='race-table-governor']"),tables=holder.find(".race-table").find(".race-table-group");Proto.init=function(){INITIALIZED||(INITIALIZED=!0,Proto[statePage?"setStateTable":"setTable"](),holder.find($("select#election_2020_races")).change(function(evt){evt.preventDefault();var el=$(this),val=el.val(),normVal=-1<val.indexOf("state-")?val.replace("state-","").toUpperCase():val,table=el.closest(".collection-race-table"),groups=table.find(".race-table-group"),target="hot-races"===normVal?".hot-race":"[data-state="+normVal+"]",selected=table.find(".race-table-group"+target);"all-races"===normVal?groups.removeClass("hide"):(groups.addClass("hide"),selected.removeClass("hide"))}))},Proto.setStateTable=function(){FeedAPI.State.getDataRefresh("Governor",stateCode,function(StateInfo){FeedAPI.Admin.getData(function(FeedAdmin){tables.each(function(){var el=$(this);Gov_Race=Gov_Race||new Race({table:tables,type:"Governor"}),function(el,StateInfo,FeedAdmin){var feedMode=FeedAdmin.views.electionMode(),views=StateInfo.views,totals=views.totals(),results=views.results(),stateInfo=FeedAdmin.views.stateInfo(stateCode)||null,pollStatus=stateInfo?stateInfo.pollTimes:null,stateMode=stateInfo?stateInfo.pollTimes.status:null,obj={};CURRENT_DATASET[stateCode]||(CURRENT_DATASET[stateCode]={});TOTALS_DATASET[stateCode]||(TOTALS_DATASET[stateCode]=null);POLLS_DATASET[stateCode]||(POLLS_DATASET[stateCode]={});"pre"===feedMode||"pre"===stateMode||null===stateMode?Gov_Race.throwDashes(el,stateInfo):(Helper.isUpdateData(CURRENT_DATASET[stateCode],results)||Helper.isUpdateData(TOTALS_DATASET[stateCode],totals))&&(CURRENT_DATASET[stateCode]=results,TOTALS_DATASET[stateCode]=totals,obj.results=StateInfo.views.results(),obj.FOXPrecinctsReporting=totals.FOXPrecinctsReporting,Gov_Race.setTable(el,stateCode,"governor",obj));Helper.isUpdateData(POLLS_DATASET["Governor-ST"],pollStatus)&&(obj.stateAdminInfo=views.stateInfo(stateCode),POLLS_DATASET[stateCode]=pollStatus,Gov_Race.setPollStatus(el,obj,stateMode))}(el,StateInfo,FeedAdmin)})})})},Proto.setTable=function(){FeedAPI.Summary.getDataRefresh("Governor",function(FeedInfo){FeedAPI.Admin.getData(function(FeedAdmin){tables.each(function(){var el=$(this);Gov_Race=Gov_Race||new Race({table:tables,type:"Governor"}),function(el,FeedInfo,FeedAdmin){var feedMode=FeedAdmin.views.electionMode(),state_code=(el.find(".status"),el.attr("data-state")),stateInfo=FeedAdmin.views.stateInfo(state_code)||null,data=FeedInfo.views.resultsByState(state_code),pollStatus=stateInfo?stateInfo.pollTimes:null,stateMode=stateInfo?stateInfo.pollTimes.status:null;CURRENT_DATASET.Governor||(CURRENT_DATASET.Governor={});POLLS_DATASET.Governor||(POLLS_DATASET.Governor={});"pre"===feedMode||"pre"===stateMode||null===stateMode?Gov_Race.throwDashes(el,stateInfo):stateMode&&Helper.isUpdateData(CURRENT_DATASET.Governor[state_code],data)&&(CURRENT_DATASET.Governor[state_code]=data,Gov_Race.setTable(el,state_code,"governor",data[0],stateMode));Helper.isUpdateData(POLLS_DATASET.Governor[state_code],pollStatus)&&(POLLS_DATASET.Governor[state_code]=pollStatus,Gov_Race.setPollStatus(el,data[0],stateMode))}(el,FeedInfo,FeedAdmin)})})})}}});
Modulr.define("fox-news.elections.presidential:pages/live/modules/race.tables/house",["require","jquery","helper","feed","lodash","@live/models/tables"],function(require,$,Helper,FeedAPI,_){var Race=require("@live/models/tables"),holder=$(".collection-race-table[data-table='race-table-house']"),tables=holder.find(".race-table").find(".race-table-group"),pageType=$("body").hasClass("house")?"house":"state",statePage="state"===Helper.getPageName(),stateCode=statePage&&$("body").data("state-code"),House_Race=null;return new function(){var Proto=this,INITIALIZED=!1,CURRENT_DATASET={},POLLS_DATASET={};Proto.init=function(){INITIALIZED||(INITIALIZED=!0,Proto[statePage?"setStateTable":"setTable"](),holder.find($("select").attr("name","presidential_2020_race")).change(function(evt){var el=$(this),val=el.val(),normVal=-1<val.indexOf("state-")?val.replace("state-","").toUpperCase():-1<val.indexOf("district-")?val.replace("district-","").replace("-special",""):val,special=-1<val.indexOf("special")?"[data-special=1]":"[data-special!=1]",table=el.closest(".collection-race-table"),groups=table.find(".race-table-group"),target="hot-races"===normVal?".hot-race":"house"==pageType?"[data-state="+normVal+"]":"[data-district="+normVal+"]"+special,selected=table.find(".race-table-group"+target);"all"===normVal?groups.removeClass("hide"):(groups.addClass("hide"),selected.removeClass("hide"))}))},Proto.setTable=function(){FeedAPI.Summary.getDataRefresh("House",function(FeedInfo){FeedAPI.Admin.getData(function(FeedAdmin){tables.each(function(){var el=$(this);House_Race=House_Race||new Race({table:tables,type:"House"}),function(el,FeedInfo,FeedAdmin){var feedMode=FeedAdmin.views.electionMode(),state=(el.find(".status .poll-info"),el.attr("data-state")),state_code=el.attr("data-special")?state.concat("-S"):state,stateInfo=FeedAdmin.views.stateInfo(state)||null,district=el.attr("data-district"),data=FeedInfo.views.resultsByState(state,district),pollStatus=stateInfo?stateInfo.pollTimes:null,stateMode=stateInfo?stateInfo.pollTimes.status:null,uid=[state_code].concat(district?[district]:[]).join("-");CURRENT_DATASET.House||(CURRENT_DATASET.House={});POLLS_DATASET.House||(POLLS_DATASET.House={});"pre"===feedMode||"pre"===stateMode||null===stateMode?House_Race.throwDashes(el,stateInfo):stateMode&&Helper.isUpdateData(CURRENT_DATASET.House[uid],data)&&(CURRENT_DATASET.House[uid]=data,House_Race.setTable(el,state,"house",data,stateMode));Helper.isUpdateData(POLLS_DATASET.House[uid],pollStatus)&&(POLLS_DATASET.House[uid]=pollStatus,House_Race.setPollStatus(el,data,stateMode))}(el,FeedInfo,FeedAdmin)})})})},Proto.setStateTable=function(){FeedAPI.State.getDataRefresh("House",stateCode,function(StateFeedInfo){FeedAPI.Admin.getData(function(FeedAdmin){tables.each(function(){var el=$(this);House_Race=House_Race||new Race({table:tables,type:"House"}),function(el,StateFeedInfo,FeedAdmin){var state_code=el.attr("data-state"),district=el.attr("data-district"),districtData=StateFeedInfo.views.results(district)[district],stateInfo=FeedAdmin.views.stateInfo(state_code),feedMode=FeedAdmin.views.electionMode(),stateDist=[state_code].concat(district?[district]:[]).join("-"),pollStatus=(el.attr("data-special")&&stateDist.concat("-S"),stateInfo.pollTimes||null),stateMode=_.get(stateInfo,"pollTimes.status","pre"),obj={};CURRENT_DATASET["House-ST"]||(CURRENT_DATASET["House-ST"]={});POLLS_DATASET["House-ST"]||(POLLS_DATASET["House-ST"]={});"pre"===feedMode||"pre"===stateMode||null===stateMode?House_Race.throwDashes(el,stateInfo):Helper.isUpdateData(CURRENT_DATASET["House-ST"][district],districtData)&&(CURRENT_DATASET["House-ST"][district]=districtData,House_Race.setTable(el,state_code,"house-state",districtData));Helper.isUpdateData(POLLS_DATASET["House-ST"],pollStatus)&&(obj.stateAdminInfo=stateInfo,POLLS_DATASET["House-ST"][district]=pollStatus,House_Race.setPollStatus(el,obj,stateMode))}(el,StateFeedInfo,FeedAdmin)})})})}}});
Modulr.define("fox-news.elections.presidential:pages/live/modules/race.tables/my.races",["require","jquery","helper","feed","lodash","core.plugins:DateTime","@live/models/my.races"],function(require,$,Helper,FeedAPI,_){var MyRacesStore=require("@live/models/my.races");return new function(){var Proto=this,table=$(".collection-race-table").find(".race-table-group"),valid=0!==table.length;Proto.init=function(type){if(!valid)return!1;!0,MyRacesStore.isAvailable()&&(Proto.setClick(),$.each(MyRacesStore.getByKey(),function(key,val){!function(key,val){for(var i=0;i<val.length;i++){var st=-1<["house","senate"].indexOf(key)?val[i].slice(0,2):val[i],dist="house"===key?val[i].slice(3):null,isSpecial="S"===(val[i].slice(3)||"").toUpperCase(),holder=$("house"===key?'.race-table-group[data-state="'+st+'"][data-district="'+dist+'"][data-race="'+key+'"]':"senate"===key?isSpecial?'.race-table-group[data-state="'+st+'"][data-race="'+key+'"][data-special="1"]':'.race-table-group[data-state="'+st+'"][data-race="'+key+'"][data-special!="1"]':'.race-table-group[data-state="'+st+'"][data-race="'+key+'"]');if(holder.length<1)return;holder.find(".favorite").addClass("active")}}(key,val)}),MyRacesStore.setInteraction(table.find(".favorite")))},Proto.setClick=function(){table.find(".favorite").off("click").on("click",function(){var arr,el=$(this),rTable=el.closest(".race-table-group"),rType=rTable.data("race"),rState=rTable.data("state"),rStr=(arr=[rState],rTable.data("district")?arr.push(rTable.data("district")):rTable.data("special")&&arr.push("S"),arr.join("-")),itemId=MyRacesStore.generateId([rType,rStr]);el.hasClass("active")?(el.removeClass("active"),MyRacesStore.remove(itemId)):MyRacesStore.isMaxNext()||(el.addClass("active"),MyRacesStore.set(itemId))})}}});
Modulr.define("fox-news.elections.presidential:pages/live/modules/race.tables/president-county",["require","jquery","helper","feed","@live/models/tables"],function(require,$,Helper,FeedAPI){var Race=require("@live/models/tables"),holder=$(".collection-race-table[data-table='race-table-president-county']"),tables=holder.find(".race-table").find(".race-table-group"),stateCode=$("body").data("state-code"),Pres_Race=null;return new function(){var INITIALIZED=!1,CURRENT_DATASET={};this.init=function(){INITIALIZED||(INITIALIZED=!0,FeedAPI.County.getDataRefresh("President",stateCode,function(StateInfo){FeedAPI.Admin.getData(function(FeedAdmin){tables.each(function(){var el=$(this);Pres_Race=Pres_Race||new Race({table:tables,type:"Presidential"}),function(el,StateInfo,FeedAdmin){var fips=el.data("county-fips"),data=(el.find(".status"),StateInfo.views.resultsByCounty(fips)),stateInfo=FeedAdmin.views.stateInfo(stateCode),distInfo=StateInfo.views.resultsByCounty(fips),feedMode=FeedAdmin.views.electionMode(),stateMode=stateInfo.pollTimes.status||null;CURRENT_DATASET[fips]||(CURRENT_DATASET[fips]=null);"pre"===feedMode||"pre"===stateMode||null===stateMode?Pres_Race.throwDashes(el,stateInfo):Helper.isUpdateData(CURRENT_DATASET[fips],data)&&(CURRENT_DATASET[fips]=data,Pres_Race.setTable(el,distInfo,"president-county",data))}(el,StateInfo,FeedAdmin)})})}),holder.find($("select#election_2020_president_county")).change(function(evt){evt.preventDefault();var el=$(this),val=el.val(),table=el.closest(".collection-race-table"),groups=table.find(".race-table-group"),selected=table.find(".race-table-group[data-county-fips="+val+"]");groups.addClass("hide"),selected.removeClass("hide")}))}}});
Modulr.define("fox-news.elections.presidential:pages/live/modules/race.tables/president",["require","jquery","helper","feed","@live/models/tables"],function(require,$,Helper,FeedAPI){var Race=require("@live/models/tables"),holder=$(".collection-race-table");return new function(){if(!(holder.length<1)){holder.data("table").replace("race-table-","");var tables=holder.find(".race-table-group"),Pres_Race=($("body").data("state-code"),null),INITIALIZED=!1,CURRENT_DATASET={},POLLS_DATASET={},ADMIN_DATASET={};this.init=function(){INITIALIZED||(INITIALIZED=!0,FeedAPI.National.getDataRefresh(function(FeedInfo){FeedAPI.Admin.getData(function(FeedAdmin){tables.each(function(){var el=$(this);Pres_Race=Pres_Race||new Race({table:tables,type:"Presidential"}),function(el,FeedInfo,FeedAdmin){el.find(".status");var state_code=el.attr("data-state"),special=!!/District/i.test(state_code),index=state_code.toLowerCase().split(" ").join("-"),adminState=state_code.substring(0,2);CURRENT_DATASET[index]||(CURRENT_DATASET[index]=null);POLLS_DATASET[index]||(POLLS_DATASET[index]=null);ADMIN_DATASET[index]||(ADMIN_DATASET[index]=null);var data=FeedInfo.views.resultsByState(state_code),stateInfo=FeedAdmin.views.stateInfo(adminState),feedMode=(FeedAdmin.views.isPollClose(adminState),FeedAdmin.views.electionMode()),stateMode=(stateInfo&&stateInfo.pollTimes,stateInfo.pollTimes.status||null),contested=stateInfo.contested||!1,obj={};"pre"===feedMode||"pre"===stateMode||null===stateMode?Pres_Race.throwDashes(el,stateInfo):Helper.isUpdateData(CURRENT_DATASET[index],data)&&(CURRENT_DATASET[index]=data,Pres_Race.setTable(el,state_code,"president",data));if(Helper.isUpdateData(ADMIN_DATASET[index],stateInfo)){var contestedChange=(!(!ADMIN_DATASET[index]||!ADMIN_DATASET[index].contested)&&ADMIN_DATASET[index].contested)!==contested;ADMIN_DATASET[index]=stateInfo,obj.stateAdminInfo=stateInfo;var dataset=2<state_code.length?obj:data;contestedChange&&stateInfo&&!special&&Pres_Race.setContested(el,stateInfo),Pres_Race.setPollStatus(el,dataset,stateMode)}}(el,FeedInfo,FeedAdmin)})})}),holder.find($("select").attr("name","presidential_2020_race")).change(function(evt){var el=$(this),normVal=el.val().replace("state-",""),table=el.closest(".collection-race-table"),groups=table.find(".race-table-group"),target="hot-races"===normVal?".hot-race":'[data-state="'+normVal+'"]',selected=table.find(".race-table-group"+target);"all-races"===normVal?groups.removeClass("hide"):(groups.addClass("hide"),selected.removeClass("hide"))}))}}}});
Modulr.define("fox-news.elections.presidential:pages/live/modules/race.tables/senate-county",["require","jquery","helper","feed","@live/models/tables"],function(require,$,Helper,FeedAPI){var Race=require("@live/models/tables"),holder=$(".collection-race-table[data-table='race-table-senate-county']"),tables=holder.find(".race-table").find(".race-table-group"),stateCode=$("body").data("state-code"),Senate_Race=null;return new function(){var INITIALIZED=!1,CURRENT_DATASET={};this.init=function(){INITIALIZED||(INITIALIZED=!0,FeedAPI.County.getDataRefresh("Senate",stateCode,function(StateInfo){FeedAPI.Admin.getData(function(FeedAdmin){tables.each(function(){var el=$(this);Senate_Race=Senate_Race||new Race({table:tables,type:"Senate"}),function(el,StateInfo,FeedAdmin){var fips=el.data("county-fips"),data=(el.find(".status"),StateInfo.views.resultsByCounty(fips)),stateInfo=FeedAdmin.views.stateInfo(stateCode),distInfo=StateInfo.views.resultsByCounty(fips),feedMode=FeedAdmin.views.electionMode(),stateMode=stateInfo.pollTimes.status||null;CURRENT_DATASET[fips]||(CURRENT_DATASET[fips]=null);"pre"===feedMode||"pre"===stateMode||null===stateMode?Senate_Race.throwDashes(el,stateInfo):Helper.isUpdateData(CURRENT_DATASET[fips],data)&&(CURRENT_DATASET[fips]=data,Senate_Race.setTable(el,distInfo,"senate-county",data))}(el,StateInfo,FeedAdmin)})})}),holder.find($("select#election_2020_senate_county")).change(function(evt){evt.preventDefault();var el=$(this),val=el.val(),table=el.closest(".collection-race-table"),groups=table.find(".race-table-group"),selected=table.find(".race-table-group[data-county-fips="+val+"]");groups.addClass("hide"),selected.removeClass("hide")}))}}});
Modulr.define("fox-news.elections.presidential:pages/live/modules/race.tables/senate",["require","jquery","helper","feed","@live/models/tables"],function(require,$,Helper,FeedAPI){var statePage="state"===Helper.getPageName(),stateCode=statePage&&$("body").data("state-code");return new function(opts){var Proto=this,INITIALIZED=!1,CURRENT_DATASET={},POLLS_DATASET={},TOTALS_DATASET={},Race=require("@live/models/tables"),Senate_Race=null,elem=$(".collection-race-table[data-table='race-table-senate']"),table=elem.find(".race-table"),tables=table.find(".race-table-group");Proto.init=function(){INITIALIZED||(INITIALIZED=!0,Proto[statePage?"setStateTable":"setTable"](),elem.find($("select#election_2020_races")).change(function(evt){evt.preventDefault();var el=$(this),val=el.val(),normVal=-1<val.indexOf("state-")?val.replace("state-","").replace("-special","").toUpperCase():val,special=-1<val.indexOf("special")?"[data-special=1]":"[data-special!=1]",table=el.closest(".collection-race-table"),groups=table.find(".race-table-group"),target="hot-races"===normVal?".hot-race":"[data-state="+normVal+"]",selected=table.find(".race-table-group"+target+special);"all-races"===normVal?groups.removeClass("hide"):(groups.addClass("hide"),selected.removeClass("hide"))}))},Proto.setStateTable=function(){table.find(".race-table-group[data-set!=1]").each(function(){var el=$(this),state="GA"===stateCode&&2===parseInt(el.attr("data-seat"),10)?"GA1":stateCode;el.attr("data-set",1),FeedAPI.State.getDataRefresh("Senate",state,function(StateInfo){FeedAPI.Admin.getData(function(FeedAdmin){Senate_Race=Senate_Race||new Race({table:tables,type:"Senate"}),function(el,state,StateInfo,FeedAdmin){var feedMode=FeedAdmin.views.electionMode(),views=StateInfo.views,totals=views.totals(),results=views.results(),stateInfo=FeedAdmin.views.stateInfo(stateCode)||null,pollStatus=stateInfo?stateInfo.pollTimes:null,stateMode=stateInfo?stateInfo.pollTimes.status:null,obj={};CURRENT_DATASET[stateCode]||(CURRENT_DATASET[stateCode]=null);TOTALS_DATASET[stateCode]||(TOTALS_DATASET[stateCode]=null);POLLS_DATASET[stateCode]||(POLLS_DATASET[stateCode]=null);"pre"===feedMode||"pre"===stateMode||null===stateMode?Senate_Race.throwDashes(el,stateInfo):(Helper.isUpdateData(CURRENT_DATASET[state],results)||Helper.isUpdateData(POLLS_DATASET[state],pollStatus)||Helper.isUpdateData(TOTALS_DATASET[state],totals))&&(CURRENT_DATASET[state]=results,TOTALS_DATASET[state]=totals,POLLS_DATASET[state]=pollStatus,obj.results=StateInfo.views.results(),obj.FOXPrecinctsReporting=totals.FOXPrecinctsReporting,obj.stateAdminInfo=views.stateInfo(stateCode),obj.isRunoff=StateInfo.views.isRunoff(),Senate_Race.setTable(el,stateCode,"senate",obj),Senate_Race.setPollStatus(el,obj,stateMode))}(el,state,StateInfo,FeedAdmin)})})})},Proto.setTable=function(){FeedAPI.Summary.getDataRefresh("Senate",function(FeedInfo){FeedAPI.Admin.getData(function(FeedAdmin){tables.each(function(){var el=$(this);Senate_Race=Senate_Race||new Race({table:tables,type:"Senate"}),function(el,FeedInfo,FeedAdmin){var feedMode=FeedAdmin.views.electionMode(),state=(el.find(".status .poll-info"),el.attr("data-state")),state_code=el.attr("data-special")?state.concat("-S"):state,stateInfo=FeedAdmin.views.stateInfo(state)||null,data=FeedInfo.views.resultsByState(state),pollStatus=stateInfo?stateInfo.pollTimes:null,stateMode=stateInfo?stateInfo.pollTimes.status:null,uid=state_code;CURRENT_DATASET.Senate||(CURRENT_DATASET.Senate={});POLLS_DATASET.Senate||(POLLS_DATASET.Senate={});if("pre"===feedMode||"pre"===stateMode||null===stateMode)Senate_Race.throwDashes(el,stateInfo);else if(stateMode&&Helper.isUpdateData(CURRENT_DATASET.Senate[uid],data)||Helper.isUpdateData(POLLS_DATASET.Senate[uid],pollStatus)){var index="GA-S"===state_code?1:0;CURRENT_DATASET.Senate[uid]=data,POLLS_DATASET.Senate[uid]=pollStatus,Senate_Race.setPollStatus(el,data[index],stateMode),Senate_Race.setTable(el,state,"senate",data[index],stateMode)}}(el,FeedInfo,FeedAdmin)})})})}}});
Modulr.define("fox-news.elections.presidential:pages/live/modules/senate.chart",["require","jquery","helper","feed","lodash","fox-news.elections.map.v3:api","core.plugins:OnWindowResize"],function(require,$,Helper,FeedAPI,_,MapAPI){require("core.plugins:OnWindowResize");return new function(){var Proto=this,INITIALIZED=!1,CHART=null,CURRENT_DATASET=null,target=$(".collection-party-race.is-senate").find(".tab-chart .chart");Proto.init=function(){0!==target.length&&(INITIALIZED||(INITIALIZED=!0,MapAPI.createSenateChart(target,{},function(ChartAPI){CHART=ChartAPI,Proto.loadData()})))},Proto.loadData=function(){if(!CHART)return Proto.init();FeedAPI.BOP.getDataRefresh(function(BOPInfo){FeedAPI.Admin.getData(function(FeedAdmin){var senateResults=BOPInfo.views.results().senate;"pre"!==FeedAdmin.views.electionMode()&&Helper.isUpdateData(CURRENT_DATASET,senateResults)&&(CURRENT_DATASET=senateResults,Proto.renderChart(senateResults))})})},Proto.renderChart=function(feedInfo){var data=feedInfo.details,seats=feedInfo.totals,info=(data.startVals,{}),total=seats.expectedTotal,colors=[];function set(len,str){for(var i=0;i<len;i++)colors.push(str)}$.each(data,function(party,val){var seats=data[party].curr+data[party].start,partyColor=Proto.getColor(party);info[party]||(info[party]={}),info[party].val=seats,info[party].hex=partyColor}),function(){for(var order=["dem","oth","empty","rep"],i=0;i<order.length;i++){var party=order[i];if("empty"!==party&&info[party])info[party]&&set(info[party].val,info[party].hex);else set(total-info.rep.val-colors.length,"#ffffff")}}(),CHART.colorize(colors)},Proto.getColor=function(party){var hex="#FFFFFF";switch(party){case"rep":hex="#d20f26";break;case"dem":hex="#1b4e81";break;case"oth":hex="#999999";break;default:hex="#FFFFFF"}return hex},Proto.resize=function(){CHART&&CHART.event.ready(function(){CHART.event.trigger("resize")})}}});
Modulr.define("fox-news.elections.presidential:pages/live/modules/senate.map",["require","jquery","helper","feed","lodash","fox-news.elections.map.v3:api","core.plugins:OnWindowResize","@live/models/mapmethods"],function(require,$,Helper,FeedAPI,_,MapAPI){require("core.plugins:OnWindowResize"),require("@live/models/mapmethods");return new function(){var Proto=this,INITIALIZED=!1,MAP=null,CURRENT_DATASET={},ADMIN_DATASET={},DEFAULT_NO_COLOR="#ffffff",NO_RACES=["CA","CT","DC","FL","HI","IN","MD","MO","NV","NY","ND","OH","PA","UT","VT","WA","WI"],collection=$(".collection-party-race.is-senate"),tab=collection.find(".tab-map"),viewport=Helper.getCurrentView(),target="mobile"===viewport?tab.find(".mobile"):tab.find(".tablet-desktop .map"),bubbleHolder=(target.find(".infographic").find(".select-wrap"),collection.find(".item-bubble-chart"));function getColor(type,party){var defaultColor={fill:DEFAULT_NO_COLOR,textColor:"#222222"};return type&&"none"!==type&&"runoff"!==type?{winner:{rep:{fill:"#d20f26",textColor:"#ffffff"},dem:{fill:"#1b4e81",textColor:"#ffffff"},ind:{fill:"#703089",textColor:"#ffffff"},oth:{fill:"#999999",textColor:"#222222"}},lead:{rep:{fill:"#ffeaec",textColor:"#222222"},dem:{fill:"#ddeeff",textColor:"#222222"},ind:{fill:"#f4e6f9",textColor:"#222222"},oth:{fill:"#dddddd",textColor:"#222222"}}}[type][party]:defaultColor}function getParty(code){var type=null;switch(code){case"R":type="rep";break;case"D":type="dem";break;case"I":type="ind";break;default:type="oth"}return type}function getColors(code,data){var item,cand,runoff,type,color,info={state:code,results:[]};return 1<data.length?function(items){for(var fill,type,party,keys=[],i=0;i<items.length;i++){var cand=items[i].results[0],runoff=items[i].isRunoff||!1;party=getParty(cand.partyCode);var norm="lead"===(type=runoff?"runoff":cand.isWinner?"winner":0<cand.votes.count?"lead":"none")?"_lean":"",str="none"===type||runoff?"runoff":party+norm;keys["winner"===type?"unshift":"push"](str)}if(1===_.uniq(keys).length)fill=getColor(type,party);else{var pattern=function(parties){for(var sortMap=["oth","oth_lean","dem","rep","ind","dem_lean","rep_lean","ind_lean","runoff"],pattern=[],i=0;i<sortMap.length;i++)-1<parties.indexOf(sortMap[i])&&pattern.push(sortMap[i]);return pattern.join("-")}(keys);(fill={}).fill="url(#stripes-"+pattern+")",fill.textColor=pattern.indexOf("lean")||0<pattern.indexOf("runoff")?"#222222":"#ffffff"}info.results.push({type:type,fill:fill.fill,textColor:fill.textColor})}(data):(item=data[0],cand=item.results[0],runoff=item.isRunoff||!1,type=runoff?"runoff":cand.isWinner?"winner":0<cand.votes.count?"lead":"none",color=function(){var code=runoff?"":getParty(cand.partyCode);return getColor(type,code)}(),info.results.push({type:type,fill:color.fill,textColor:color.textColor})),info}Proto.init=function(){0!==target.length&&(INITIALIZED||(INITIALIZED=!0,MapAPI.createSenateMap(target,{},function(MapAPI){MAP=MapAPI;for(var i=0;i<NO_RACES.length;i++)MAP.colorize(NO_RACES[i],{fill:"#f1f1f1",textColor:"#999999"});Proto.loadData()})))},Proto.loadData=function(){if(!MAP)return Proto.init();FeedAPI.Summary.getDataRefresh("senate",function(dataset){FeedAPI.Admin.getData(function(FeedAdmin){var stateResults=dataset.views.resultsByState();for(var id in stateResults){dataset.views.resultsByState(id)[0].stateAdminInfo.pollTimes.status;var stateInfo=FeedAdmin.views.stateInfo(id)||null,pollInfo=stateInfo?stateInfo.pollTimes:null,pollStatus=stateInfo?pollInfo.status:null;if("pre"===FeedAdmin.views.electionMode()||"pre"===pollStatus||null===pollStatus)ADMIN_DATASET[id]=pollStatus,"mobile"!==viewport&&(MAP.tooltip(id,stateResults,FeedAdmin.views),Proto.setBubbles(id,stateResults[id],!0)),MAP.colorize(id,{fill:"#ffffff",textColor:"#222222"});else if(Helper.isUpdateData(CURRENT_DATASET[id],stateResults[id])||Helper.isUpdateData(ADMIN_DATASET[id],pollStatus)){CURRENT_DATASET[id]=stateResults[id],ADMIN_DATASET[id]=pollStatus;var colorInfo=getColors(id,stateResults[id]);MAP.colorize(id,colorInfo),"mobile"!==viewport&&(MAP.tooltip(id,stateResults,FeedAdmin.views),Proto.setBubbles(id,stateResults[id],!1))}}})})},Proto.setBubbles=function(state,stateData,pre){for(var special=1<stateData.length,i=0;i<stateData.length;i++){var cand=stateData[i].results[0],votes=cand.votes.count,runoff=stateData[i].isRunoff||!1,mode=pre?"removeClass":"addClass",bubble=special?bubbleHolder.find(".bubble:contains("+state+(i+1)+")"):bubbleHolder.find(".bubble:contains("+state+")"),winner=stateData[i].winner?"winner":0<votes?"lead":"none",flipped=stateData[i].isFlipped?" flip":"",party="winner"==winner||"lead"==winner?getParty(cand.partyCode):"",prevParty=(getColor(winner,party),0<bubble.length?(bubble.attr("class")||"").replace("bubble","").trim():""),type=runoff?"runoff":stateData[i].winner?party+flipped:0<votes?party+" lean":"";prevParty!==type&&bubble.removeClass(prevParty),bubble[mode](type)}},Proto.resize=function(){MAP&&MAP.event.ready(function(){MAP.event.trigger("resize")})}}});
Modulr.define("fox-news.elections.presidential:pages/live/modules/state.countdown",["require","jquery","helper","core.plugins:CountdownTimer","core.base:utils/akamai"],function(require,$,Helper){var CountdownTimer=require("core.plugins:CountdownTimer"),Time=require("core.base:utils/akamai").time,CONFIG_container_selector=".countdown",CONFIG_attribute_name="data-date",stateCode=$("body").attr("data-state-code")||null,hasBoth=(Time.getCurrent(),stateCode&&0<$(".collection-countdown.has-both").length),holder=$(".collection-state-topper");if(stateCode){var elements=$(CONFIG_container_selector+"["+CONFIG_attribute_name+"]:visible");0<elements.length&&elements.each(function(){var el=$(this),endTime=el.attr(CONFIG_attribute_name)||null;if(endTime){endTime=Helper.fixDate(endTime);var countdown=new CountdownTimer({direction:"down",endTime:endTime});countdown.onTick(function(info){info.done||function(target,info){target.find(".days .value").text(info.days),target.find(".hour .value").text(info.hrs),target.find(".min .value").text(info.mins),target.find(".sec .value").text(info.secs)}(el,info)}),countdown.onDone(function(info){!function(target){if(hasBoth){var $container=target.closest(".collection-countdown");$container.removeClass("has-both");var $content=$container.find(".content");$content.find(".candidate-group.full").remove(),$content.find(".candidate-group").removeClass("hide")}else{var $countdown=target.parent(".candidate-group"),$table=$countdown.next();$countdown.remove(),$table.removeClass("hide")}}(el),holder.removeClass("has-countdown")})}})}});
Modulr.define("fox-news.elections.presidential:pages/live/modules/state.map",["require","jquery","helper","lodash","feed","fox-news.elections.map.v3:api","core.base:utils/detector","core.plugins:DateTime"],function(require,$,Helper,_,FeedAPI,StateMapAPI){require("core.base:utils/detector");var DateTime=require("core.plugins:DateTime");return new function(){var Proto=this,INITIALIZED=!1,MAP=null,CURRENT_DATASET={},PRES_DATASET={},ADMIN_DATASET={},CAND_DATASET={},target=$(".collection-state-topper .infographic"),stateCode=$("body").data("state-code")||null;function getParty(code){var type=null;switch(code){case"R":type="rep";break;case"D":type="dem";break;case"I":type="ind";break;default:type="oth"}return type}function getColor(type,party){return type&&"none"!==type?{winner:{rep:"#d20f26",dem:"#1b4e81",ind:"#703089",oth:"#999999"},lead:{rep:"#ffeaec",dem:"#ddeeff",ind:"#f4e6f9",oth:"#dddddd"}}[type][party]:{fill:"#ffffff",textColor:"#222222"}}Proto.init=function(){!INITIALIZED&&stateCode&&(INITIALIZED=!0,StateMapAPI.createStateMap(target,{stateCode:stateCode},function(mapInstance){MAP=mapInstance,Proto.loadData()}))},Proto.loadData=function(){if(!MAP)return Proto.init();FeedAPI.County.getDataRefresh("President",stateCode,function(dataset){FeedAPI.Admin.getData(function(FeedAdmin){var mode=FeedAdmin.views.stateInfo(stateCode);if("pre"!==mode){var feedData=dataset.views,pollData=dataset.views.stateInfo(stateCode).pollTimes||null,countyResults=dataset.views.resultsAllCounties(),dataMode=feedData.resultsByCounty(stateCode);if(Helper.isUpdateData(countyResults,CURRENT_DATASET)){var info=function(results){var colors=null,counties={};for(var code in results){var county=results[code],npid=!!county.winner&&county.winner,party=(!npid||county.resultsByCandidateId[npid],0<county.lead.length?getParty(county.lead[0].candidate.partyCode):"none"),type=100===county.precinctsReporting.precinctsReporting.val?"winner":"lead";(colors=colors||{})[code]=getColor(type,party),counties[party]||(counties[party]=[]),counties[party].push({code:code})}return{colors:colors,counties:counties}}(CURRENT_DATASET=countyResults);for(var code in info.colors)MAP.colorize(code,{fill:info.colors[code]});MAP.tooltip(countyResults,dataMode,pollData)}!function(admin){FeedAPI.State.getData("president",stateCode,function(ElectoralData){var data=ElectoralData.views,totals=data.totals(),results=data.results(),candInfo=data.candidateById;(Helper.isUpdateData(PRES_DATASET,totals)||Helper.isUpdateData(ADMIN_DATASET,admin))&&function(info,stateInfo){var holder=$(".collection-state-topper .topper-poll-info"),poll=holder.find(".poll-info"),pct=(poll.find(".pill"),holder.find(".percent-in")),dataMode=_.get(stateInfo,"pollTimes.status",!1),close=_.get(stateInfo,"pollTimes.close",""),precinctsReporting=0<=info.FOXPrecinctsReporting?info.FOXPrecinctsReporting+"% ":"",prevPoll=(poll.attr("class")||"").replace("poll-info","").trim(),closeNorm=DateTime(close,"${hr:reg}:${min}${ampm}"),desc="open"===dataMode?"is-open":"is-closed",pollText="open"===dataMode?"Polls close at "+closeNorm+" ET":"Polls are closed",pillSpan='<span class="pill '+desc+'">'+("open"===dataMode?"OPEN":"CLOSED")+"</span>";pct.text("Reporting "+precinctsReporting+"in"),prevPoll!==desc&&(poll.removeClass(prevPoll),poll.addClass(desc).text(pollText).prepend(pillSpan))}(PRES_DATASET=totals,ADMIN_DATASET=admin),Helper.isUpdateData(CAND_DATASET,results)&&(CAND_DATASET=results,function(info){$(".collection-state-topper .candidates").find(".party-info").each(function(){var el=$(this),npid=el.data("npid")||!1,candData=!!npid&&info(npid),percentTarget=el.find(".percent"),voteTarget=el.find(".votes");if(npid&&candData){var votePct=candData.votes.percentage,voteCount=candData.votes.count;el[candData.isWinner?"addClass":"removeClass"]("winner"),FeedAPI.methods.numUpdate(percentTarget,votePct,{format:"pct",formatStr:"${num}",precision:!0,precisionType:"tenth"}),FeedAPI.methods.numUpdate(voteTarget,voteCount,{format:"num",formatStr:"${num}"})}})}(candInfo))})}(mode)}})})}}});
Modulr.define("fox-news.elections.presidential:pages/live/modules/toggle",["require","jquery","helper"],function(require,$,Helper){Helper.isIE()&&require(["@live/modules/senate.map","@live/modules/senate.chart","@live/modules/house.map","@live/modules/house.chart"]);return new function(){var Proto=this,pageType=Helper.getPageName(),toggle=$(".filter-toggle").find(".filter-toggle-option");Proto.init=function(){toggle&&Proto.set()},Proto.set=function(){var tabs=$(".tabs");toggle.on("click",function(){var el=$(this),type=0<=el.attr("class").indexOf("map")?"map":"chart";if(!el.hasClass("is-active")&&(toggle.removeClass("is-active"),el.addClass("is-active"),tabs.find(".tab").removeClass("is-active"),tabs.find(".tab-"+type).addClass("is-active"),Helper.isIE()))switch(pageType){case"senate":var SenateMap=require("@live/modules/senate.map"),SenateChart=require("@live/modules/senate.chart");"map"==type&&setTimeout(function(){SenateMap.resize()},200),"chart"==type&&setTimeout(function(){SenateChart.resize()},200);break;case"house":var HouseMap=require("@live/modules/house.map"),HouseChart=require("@live/modules/house.chart");"map"==type&&setTimeout(function(){HouseMap.resize()},200),"chart"==type&&setTimeout(function(){HouseChart.resize()},200)}})}}});
Modulr.define("fox-news.elections.presidential:pages/live/modules/va.barchart",["require","jquery","barchart"],function(require,$,BarChart){var $barChart=$(".collection-voter-analysis .content .infographic .content"),question=$("#election_2020_voter_analysis_question"),answer=$("#election_2020_voter_analysis_answer"),url="https://feeds-elections.foxnews.com/voter_analysis/2020_Generals/national_feeds/questions.json";$.ajax({url:url,cache:!0,async:!0}).done(function(data){data.forEach(function(element){question.append($("<option></option>").attr("value",element.qcode).text(element.label))})}),0<=$barChart.length&&(BarChart.createBarChart(),question.change(function(){BarChart.createBarChart();var qcode=question.val();answer.empty(),$.ajax({url:url,cache:!0,async:!0}).done(function(data){data.forEach(function(element){element.qcode===qcode&&(answer.append($("<option></option>").text("Select an Answer")),$.each(element.answers,function(index,value){answer.append($("<option></option>").attr("value",value).text(value))}))})})}),answer.change(function(){var dataset=[question.val(),answer.val()];BarChart.createBarChart(dataset)}))});
Modulr.define("fox-news.elections.presidential:pages/live/modules/video",["require","jquery","helper","lodash","core.video:api","core.plugins:OnWindowResize","core.plugins:ImageResizer","@live/models/video.controls"],function(require,$,Helper,_,Video){require("core.plugins:OnWindowResize");var ImageResizer=require("core.plugins:ImageResizer"),VideoControls=require("@live/models/video.controls");if(0!==$(".collection.collection-video-playlist").length){(new function(){var vol,Proto=this,INITIALIZED=!1,videoContainer=(Helper.videoHelper,$(".m .video-container")),playlistContainer=$(".content.video-list"),VIDEO_ID=videoContainer.attr("data-video-id")||!1,PLAYLIST_ID=playlistContainer.attr("data-playlist-id")||!1,moreButton=(videoContainer.attr("data-video-domain"),$(".live-coverage"),$(".button.js-stream-toggle"),$(".button.mobile"));function fireVideoFunctionality(properties,vidItem,userClickedVideo){var $this=$(vidItem),$container=$(".video-list");$(".video-single").removeClass("is-active"),$this.addClass("is-active"),$(".video-list").animate({scrollTop:$this.offset().top-$container.offset().top+$container.scrollTop()},"slow");var videoNum=$this.attr("id"),newDataAttr=$("#"+videoNum).attr("data-video-id");$(".video-container").attr("data-video-id",newDataAttr),Instance=Video.embed($(".video-container"),properties),VideoControls.addInstance($(".video-container"),Instance),Instance.on("amp.advance",function(data){var item=getNextVideoItem();fireVideoFunctionality(properties,item,userClickedVideo)}),vol=vol||userClickedVideo?(Instance.trigger("unmute"),!0):(Instance.trigger("unmute"),!1)}function getNextVideoItem(){var currentlyPlaying=$(".video-container").attr("data-video-id"),currentVideoId=$('.video-single[data-video-id="'+currentlyPlaying+'"]').attr("id"),initialVideoNum=parseInt(currentVideoId.split("video-")[1],10)+1;return $(".video-single#video-"+(15<initialVideoNum?1:initialVideoNum).toString())}Proto.init=function(){if(!INITIALIZED){var properties={app:{rules:["playername:elections-2020"],autoadvance:"custom"},player:{autoplay:INITIALIZED=!0,flash:{vars:{user_controlled_autoplay:!0,auto_play_override:!0}},autoadvance:{interval:5,enabled:!0}}};if(videoContainer){var videoPLaylist=$(".video-list");if(0!==videoPLaylist.length){videoPLaylist.html("");var streamItem;Video.getVideoFeedById(VIDEO_ID,function(data){streamItem=data.raw.channel.item}),Video.getPlaylistFeed(PLAYLIST_ID,function(data){var Instance;vol=!0,(Instance=(VIDEO_ID&&data.items.unshift(streamItem),Proto.embedFirstPlaylistVid(data),Video.embed($(".video-container"),properties))).on("amp.advance",function(data){var item=getNextVideoItem();fireVideoFunctionality(properties,item,!1)}),Instance.on("player.ready",function(data){Instance.trigger("muteState",function(data){vol||Instance.trigger("mute")})}),Proto.addPlaylistInfo(data,videoPLaylist),Proto.fireVideoClick(properties,!1)}),moreButton.on("click",function(e){e.preventDefault();var hiddenVideos=videoPLaylist.find(".article").filter(function(){return"none"===$(this).css("display")}),videos=hiddenVideos.slice(0,3).addClass("show");hiddenVideos.length<=3&&moreButton.addClass("hide"),videos.addClass("show")})}}}},Proto.embedFirstPlaylistVid=function(data){data.items[0]||(data.items[0]={guid:"5614615980001",title:"Fox News Go",category:["live_stream","live_stream|fnc","settings/advertising/ad_supported"],link:"https://video.foxnews.com/v/5614615980001","itunes-duration":"00:00:00","media-group":{"media-thumbnail":{"@attributes":{height:"240",url:"https://media2.foxnews.com/BrightCove/694940094001/2018/03/19/694940094001_5754212826001_5614615980001-vs.jpg?pubId=694940094001",width:"320"}}}});var video_id=data.items[0].link.split("/v/")[1].split("/")[0];$(".video-container").attr("data-video-id",video_id),setTimeout(function(){$(".video-single#video-1").addClass("is-active")},3e3)},Proto.addPlaylistInfo=function(data,videoPLaylist){var PLAYLIST_MARKUP=[],videoItems=data.items.slice(0,15);for(i=0;i<videoItems.length;i++){var videoInfo=videoItems[i],video_id=videoInfo.guid,vidTitle=videoInfo.title,vidDuration=videoInfo["itunes-duration"].split("00:"),vidDurationNorm=2===vidDuration.length?vidDuration[1]:"00:"+vidDuration[2],vidImg=videoInfo["media-group"]["media-thumbnail"]["@attributes"].url.replace(/^http\:/,""),vidCategory=videoInfo.category[0];template='<article class="article video-single video-%NUM%" id="video-%NUM%" data-video-id="%VIDEO_ID%">                    <div class="m">                        <a href="#"><picture>                            <source media="(max-width: 767px)" srcset="%IMAGE_HOLDER_1% 264w">                            <source media="(min-width: 768px) and (max-width: 1023px)" srcset="%IMAGE_HOLDER_2% 312w">                            <source media="(min-width: 1024w)" srcset="%IMAGE_HOLDER% 156w">                            <img src="%IMAGE_HOLDER%" alt="%TITLE_HOLDER%">                        </picture>                        </a><span class="pill duration"><a href="#" class="pill-link">%PILL_DURATION%</a></span>                    </div><div class="info">                    <header class="info-header">                        <h3 class="title"><a href="%LINK%">%TITLE_HOLDER%</a></h3>                    </header></div></article>',void 0!==vidDuration[1]&&"Fox News Go"!==vidTitle?template=template.replace(/%VIDEO_ID%/g,video_id).replace(/%NUM%/g,i+1).replace(/%TITLE_HOLDER%/g,vidTitle).replace(/%CATEGORY%/g,vidCategory).replace(/%LINK%/g,videoInfo.link).replace(/%IMAGE_HOLDER%/g,ImageResizer(vidImg,156,88)).replace(/%IMAGE_HOLDER_1%/g,ImageResizer(vidImg,264,148)).replace(/%IMAGE_HOLDER_2%/g,ImageResizer(vidImg,312,176)).replace(/%PILL_DURATION%/g,vidDurationNorm):template=template.replace(/%VIDEO_ID%/g,video_id).replace(/%NUM%/g,i+1).replace(/%TITLE_HOLDER%/g,vidTitle).replace(/%CATEGORY%/g,vidCategory).replace(/%LINK%/g,videoInfo.link).replace(/%IMAGE_HOLDER%/g,ImageResizer(vidImg,156,88)).replace(/%IMAGE_HOLDER_1%/g,ImageResizer(vidImg,264,148)).replace(/%IMAGE_HOLDER_2%/g,ImageResizer(vidImg,312,176)).replace(/%PILL_DURATION%/g,"LIVE"),PLAYLIST_MARKUP.push(template)}videoPLaylist.append(PLAYLIST_MARKUP.join(""))},Proto.fireVideoClick=function(properties,userClickedVideo){$(".video-single").each(function(){$(this).on("click",function(e){e.preventDefault(),fireVideoFunctionality(properties,this,!0)})})}}).init()}});
Modulr.define("fox-news.elections.presidential:pages/live/modules/voter.analysis",["require","jquery"],function(require,$){var $tables=$(".item-table-collapsible .table-content table");0<$tables.length&&$tables.off("click").on("click",function(){$(this).toggleClass("is-collapsed"),$(this).toggleClass("is-expanded")}),$("#election_2020_states").change(function(){var value=$(this).children("option:selected").val();document.location="?state="+value}),$("#election_2020_races").change(function(){var value=$(this).children("option:selected").val();document.location="?race="+value});var $question=$("#election_2020_question"),$tableItems=$(".item-table-collapsible");$question.change(function(){var value=$(this).children("option:selected").val();$tableItems.each(function(){var item=$(this);item.children(".table-heading").find("span").html()!==value?item.hide():item.show()})})});
Modulr.define("fox-news.elections.presidential:pages/live/my.races",["require","jquery","helper","core.plugins:OnWindowResize","@live/modules/my.races"],function(require,$,Helper){return["@live/modules/my.races","common/modules/sticky.nav"]});
Modulr.define("fox-news.elections.presidential:pages/live/senate",["require","jquery","helper","core.plugins:OnWindowResize"],function(require,$,Helper){return["common/modules/sticky.nav","@live/modules/race.tables/senate","@live/modules/bop.bars","@live/modules/senate.chart","@live/modules/senate.map","@live/modules/toggle","@live/modules/dials"]});
Modulr.define("fox-news.elections.presidential:pages/live/state",["require","jquery","helper","core.plugins:OnWindowResize"],function(require,$,Helper){var tables=$(".collection-race-results"),tableType=["president","president-county","house","senate","senate-county","governor","governor-county"];return tables.each(function(){$(this).find(".collection-race-table").each(function(){var type=$(this).data("table").replace("race-table-",""),index=tableType.indexOf(type),sel=-1<index?tableType[index]:null;sel&&require(["@live/modules/race.tables/"+sel],function(module){Helper.execModules([module])})})}),function(){var $question=$("#election_2020_ballots");if(0!==$question.length){var $ballotTable=$(".collection-ballot-measures .item-table");$question.change(function(){var val=$(this).children("option:selected").val();"all"===val?$ballotTable.each(function(){$(this).show()}):$ballotTable.each(function(){var item=$(this);item.children(".table-heading").find(".title span").html()!==val?item.hide():item.show()})})}}(),["@live/modules/state.map","@live/modules/house.bubbles","@live/modules/state.countdown","common/modules/sticky.nav","@live/modules/dials","@live/modules/voter.analysis"]});
Modulr.define("fox-news.elections.presidential:pages/live/states",["require","jquery","helper"],function(require,$,Helper){return[]});
Modulr.define("fox-news.elections.presidential:pages/live/video",["require","jquery"],function(require,$){return["@live/modules/video","@live/modules/loadmore"]});
Modulr.define("fox-news.elections.presidential:pages/live/voter.analysis",["require","jquery"],function(require,$){return["common/modules/sticky.nav","@live/modules/va.barchart","@live/modules/voter.analysis"]});
Modulr.define("fox-news.elections.presidential:router",["require","jquery","helper"],function(require,$,Helper){return new function(){var Proto=this,PAGE_TYPE=Helper.getPageType(),PAGE_INIT=PAGE_TYPE?["pages",PAGE_TYPE,"index"].join("/"):null,INITIALIZED=!1,REQUIRE_REQUESTED=!1,CALLBACK_QUEUE=[];function trigger(){Proto.ready(function(){!function(){if(0<CALLBACK_QUEUE.length)for(;0<CALLBACK_QUEUE.length;){CALLBACK_QUEUE.shift()()}INITIALIZED=!0}()})}function isFN(){return"function"==typeof callback}Proto.ready=function(callback){INITIALIZED?isFN()&&callback():isFN()&&CALLBACK_QUEUE.push(callback),REQUIRE_REQUESTED||(REQUIRE_REQUESTED=!0,PAGE_INIT?require([PAGE_INIT],function(App){trigger()}):trigger())}}});
!function(Modulr,FNC){if(Modulr.getInstance("fox-news.elections.presidential"))return;var Instance=Modulr.config({instance:"fox-news.elections.presidential",baseDomain:FNC.CDN.domain,baseUrl:"/static/orion/scripts/fox-news/elections/2020/presidential/app",masterFile:"/static/orion/scripts/core/utils/modulr/master.js",packages:["core.plugins","core.video","core.base","core.templates",{"fox-news.elections.map.v2":"/static/orion/scripts/fox-news/elections/vis/map/v2/bootstrap.js","fox-news.elections.map.v3":"/static/orion/scripts/fox-news/elections/vis/map/v3/ag.app.js","fox-news.elections.barchart":"/static/orion/scripts/fox-news/elections/vis/barchart/v1/bootstrap.js","fox-news.elections.feeds.2020":"/static/orion/scripts/fox-news/elections/feeds/2020/ag.app.js"}],paths:{"@FeedAPI":"fox-news.elections.feeds.2020:api.presidential","@live":"pages/live"},shim:{jquery:{src:"/static/orion/scripts/core/utils/jquery/core.js",exports:"jQuery"},lodash:{src:"/static/orion/scripts/core/utils/lodash.js",exports:"_"},modernizr:{src:"/static/orion/scripts/core/utils/modernizr.js",exports:"Modernizr"},"jquery.cookie":{src:"/static/orion/scripts/core/utils/jquery/plugins/cookie.js",exports:"jQuery.cookie"},"jquery.numLiveUpdate":{src:"/static/orion/scripts/core/utils/jquery/plugins/numLiveUpdate.js",exports:"jQuery.fn.numLiveUpdate",deps:["jquery"]},"tween.lite":{src:"/static/orion/scripts/core/utils/tween.lite.js",exports:"TweenLite"},vue:{src:"/static/orion/scripts/core/utils/vue.js",exports:"Vue"},promise:{src:"/static/orion/scripts/core/utils/promise.polyfill.js",exports:"Promise"}}});Instance.define("cdn",function(){return FNC.CDN}),Instance.define("ISA",function(){return FNC.ISA})}(window.Modulr,window.FNC);