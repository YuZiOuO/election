/*! updated; 11-06-2020 01:18 AM **/


Modulr.define("core.base:modules/elections.2020",["require","jquery","lodash","core.plugins:EventMessageHandler","core.plugins:DateTime","modules/breaking-news"],function(require,$,_,EventMessageHandler,DateTime,BreakingNews){return function(){var ISA=window.FNC&&window.FNC.ISA?window.FNC.ISA:null,Events=new EventMessageHandler;!function(){if(ISA){var meta=ISA.meta();if(-1<["fnc/root","fbn/root"].indexOf(meta.channel)&&"homepage"===meta.pagetype){meta.channel;var target=$(".elections-iframe");if(0!==target.length){var dt,secs,ret,res,iframe=target.find("iframe").clone(),src=iframe.attr("src"),qs=(window.location.search,res=[],-1<window.location.search.indexOf("admin_preview")&&res.push("admin_preview"),-1<window.location.search.indexOf("mode=election_day")&&res.push("mode=election_day"),-1<window.location.search.indexOf("3t=1")&&res.push("3t=1"),res.push("cb="+(dt=new Date,secs=DateTime(dt,"${sec}"),ret=DateTime(dt,"${yr}${mm}${dd}${hr:mil}${min}"),ret+=secs<=30?30:1)),res.length?res.join("&"):"");qs&&(iframe.attr("src",src+(/\?/.test(src)?"&":"?")+qs),target.html(iframe))}}}}(),function(){if(ISA){ISA.meta();var res,path,iframePath="/static/orion/html/elections/2020/banner/index.html";if(res=!0,path=window.location.pathname,/^\/elections\/2020/.test(path)?res=!1:-1<path.indexOf(iframePath)&&(res=!1),res){var src="https://static.foxnews.com"+iframePath,id="elections-iframe-banner";if(!(0<$("#"+id).length)){src+=function(){var res=[];return-1<window.location.search.indexOf("banner_preview")?res.push("banner_preview"):-1<window.location.search.indexOf("banner=1")&&res.push("banner=1"),-1<window.location.search.indexOf("mode=election_day")&&res.push("mode=election_day"),-1<window.location.search.indexOf("3t=1")&&res.push("3t=1"),res.length?"?"+res.join("&"):""}(),Events.addHandler("elections.external.iframe.banner",function(info){info&&("resize"===info.event&&$("#"+id+" > iframe:first").css("height",info.data),"enabled"===info.event?(console.log("[banner] disable breaking news alerts"),BreakingNews.disable()):"disabled"===info.event&&BreakingNews.enable())});var html='<div id="'+id+'">                    <iframe aria-label="Elections 2020 Banner" src="'+src+'"                         allowtransparency="true" border="0" frameborder="0" scrolling="no"                         style="position: fixed; bottom: 0; height: 0; width: 100%; z-index: 900">                    </iframe>                </div>';$("body").append(html)}}}}()}});